<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://docsaid.org/blog</id>
    <title>DOCSAID Blog</title>
    <updated>2024-05-16T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://docsaid.org/blog"/>
    <subtitle>DOCSAID Blog</subtitle>
    <icon>https://docsaid.org/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[實作 ANLS]]></title>
        <id>https://docsaid.org/blog/impl-normalized-levenshtein-similarity</id>
        <link href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity"/>
        <updated>2024-05-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Average Normalized Levenshtein Similarity]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0516-0a6a6660c35203eb7984bbb873ead9cc.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>Average Normalized Levenshtein Similarity，簡稱 ANLS，是一種用於計算兩個字符串之間相似性的指標。</p>
<p>在自然語言處理（NLP）中，我們經常需要比較兩個字符串的相似性。</p>
<p>Levenshtein Similarity 是一種常見的度量方法，它衡量了兩個字符串之間的「<strong>編輯距離</strong>」，即通過多少次插入、刪除或替換操作可以將一個字符串轉換為另一個字符串。然而，Levenshtein Similarity 本身並不直觀，因為它取決於字符串的長度。</p>
<p>為了解決這個問題，我們可以將 Levenshtein Similarity 標準化為 [0, 1] 區間，這樣我們就可以更容易地理解和比較不同字符串之間的相似性，稱為 Normalized Levenshtein Similarity（NLS）。</p>
<p>由於 NLS 指的是一組字串之間的相似性，我們可以將其進一步擴展為 ANLS，即 Average Normalized Levenshtein Similarity，它計算了多組字串之間的平均相似性，藉此來橫量模型的性能。</p>
<p>然後...</p>
<p>我總是找不到喜歡的實作，最後決定自己寫一個。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="導入必要的庫">導入必要的庫<a class="hash-link" aria-label="導入必要的庫的直接連結" title="導入必要的庫的直接連結" href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity#%E5%B0%8E%E5%85%A5%E5%BF%85%E8%A6%81%E7%9A%84%E5%BA%AB">​</a></h2>
<p>首先，我們需要導入一些必要的庫，特別是由 <code>torchmetrics</code> 實作的 <code>EditDistance</code>：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Any</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Literal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Union</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metric </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Metric</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> EditDistance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utilities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dim_zero_cat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>由於 <code>EditDistance</code> 已經可以計算 Levenshtein 距離，我們可以直接使用它來計算兩個字符串之間的編輯距離。然而，<code>EditDistance</code> 並沒有提供標準化的功能，所以我們需要自己實現這一部分。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="實作標準化功能">實作標準化功能<a class="hash-link" aria-label="實作標準化功能的直接連結" title="實作標準化功能的直接連結" href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity#%E5%AF%A6%E4%BD%9C%E6%A8%99%E6%BA%96%E5%8C%96%EF%BF%BD%E5%8A%9F%E8%83%BD">​</a></h2>
<p>在這裡，我們繼承 <code>torchmetrics.metric.Metric</code> 的介面，所以我們需要實作 <code>update</code> 和 <code>compute</code> 方法：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">NormalizedLevenshteinSimilarity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Metric</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        substitution_cost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reduction</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Literal</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">edit_distance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> EditDistance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            substitution_cost</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">substitution_cost</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reduction</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Set to None to get distances for all string pairs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這裡有幾個要點：</p>
<ol>
<li>確保輸入的 <code>preds</code> 和 <code>target</code> 是字符串列表，否則函數就會計算到「字元」的部分。</li>
<li>計算每個字符串的最大長度，這樣才能進行標準化。</li>
</ol>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> preds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Update state with predictions and targets."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isinstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        preds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isinstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    distances </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">edit_distance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_lengths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ratio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        max_lengths </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros_like</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distances</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        distances</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> max_lengths</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nls_values </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="實作-reduction-參數">實作 <code>reduction</code> 參數<a class="hash-link" aria-label="實作-reduction-參數的直接連結" title="實作-reduction-參數的直接連結" href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity#%E5%AF%A6%E4%BD%9C-reduction-%E5%8F%83%E6%95%B8">​</a></h2>
<p>我們還需要保留 <code>reduction</code> 參數的發揮空間，如果我們指定 <code>mean</code>，那就是常見的 ANLS 分數。</p>
<p>除了一般的 <code>mean</code>，我們也可以使用 <code>sum</code> 或 <code>none</code>，來完成不同的需求。</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nls_score</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_elements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Compute the ANLS over state."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">int32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> num_elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Compute the NLS over state."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dim_zero_cat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_values_list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_score</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_elements</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這裡需要注意的部分是當我們指定 <code>reduction</code> 為 <code>none</code> 時，我們需要將所有的 NLS 值返回，而不是計算平均值。這邊我參考了 <code>torchmetrics.text.EditDistance</code> 的實現方式，使用了 <code>dim_zero_cat</code> 來將列表中的值拼接在一起，確保回傳的是一個 <code>Tensor</code>。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="完整的實作">完整的實作<a class="hash-link" aria-label="完整的實作的直接連結" title="完整的實作的直接連結" href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AF%A6%E4%BD%9C">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_BuS1"><p>我們將程式同步更新到 <a href="https://github.com/DocsaidLab/DocsaidKit/blob/main/docsaidkit/torch/metrics/normalized_levenshtein_similarity.py" target="_blank" rel="noopener noreferrer"><strong>DocsaidKit/.../normalized_levenshtein_similarity.py</strong></a></p></div></div>
<p>完整的實作如下：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Any</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Literal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Union</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tensor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metric </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Metric</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> EditDistance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchmetrics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utilities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dim_zero_cat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">NormalizedLevenshteinSimilarity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Metric</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Normalized Levenshtein Similarity (NLS) is a metric that computes the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    normalized Levenshtein similarity between two sequences.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    This metric is calculated as 1 - (levenshtein_distance / max_length),</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    where `levenshtein_distance` is the Levenshtein distance between the two</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    sequences and `max_length` is the maximum length of the two sequences.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    NLS aims to provide a similarity measure for character sequences</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    (such as text), making it useful in areas like text similarity analysis,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Optical Character Recognition (OCR), and Natural Language Processing (NLP).</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    This class inherits from `Metric` and uses the `EditDistance` class to</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compute the Levenshtein distance.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Inputs to the ``update`` and ``compute`` methods are as follows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - ``preds`` (:class:`~Union[str, Sequence[str]]`):</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Predicted text sequences or a collection of sequences.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - ``target`` (:class:`~Union[str, Sequence[str]]`):</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Target text sequences or a collection of sequences.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Output from the ``compute`` method is as follows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    - ``nls`` (:class:`~torch.Tensor`): A tensor containing the NLS value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Returns 0.0 when there are no samples; otherwise, it returns the NLS.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        substitution_cost:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            The cost of substituting one character for another. Default is 1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        reduction:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Method to aggregate metric scores.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Default is 'mean', options are 'sum' or None.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            - ``'mean'``: takes the mean over samples, which is ANLS.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            - ``'sum'``: takes the sum over samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            - ``None`` or ``'none'``: returns the score per sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        kwargs: Additional keyword arguments.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Example::</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Multiple strings example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; metric = NormalizedLevenshteinSimilarity(reduction=None)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; preds = ["rain", "lnaguaeg"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; target = ["shine", "language"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; metric(preds, target)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        tensor([0.4000, 0.5000])</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; metric = NormalizedLevenshteinSimilarity(reduction="mean")</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &gt;&gt;&gt; metric(preds, target)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        tensor(0.4500)</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        substitution_cost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reduction</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Literal</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">**</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">edit_distance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> EditDistance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            substitution_cost</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">substitution_cost</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reduction</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Set to None to get distances for all string pairs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        allowed_reduction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> reduction </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> allowed_reduction</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string-interpolation string" style="color:#e3116c">f"Expected argument `reduction` to be one of </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">allowed_reduction</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">, but got </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">reduction</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> reduction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"nls_values_list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                default</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dist_reduce_fx</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"cat"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"nls_score"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                default</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dist_reduce_fx</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"sum"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"num_elements"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                default</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dist_reduce_fx</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"sum"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> preds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Update state with predictions and targets."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isinstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            preds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isinstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        distances </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">edit_distance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        max_lengths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ratio </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            max_lengths </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">zeros_like</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distances</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            distances</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> max_lengths</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nls_values </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_values_list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nls_values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_score </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> nls_values</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_elements </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> nls_values</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nls_score</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num_elements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Tensor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Compute the ANLS over state."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">int32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"mean"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> num_elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> nls_score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tensor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""Compute the NLS over state."""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"none"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reduction </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dim_zero_cat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_values_list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_compute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nls_score</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">num_elements</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"__main__"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    anls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> NormalizedLevenshteinSimilarity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reduction</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'mean'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    preds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"rain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lnaguaeg"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"shine"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"language"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">anls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">preds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="參考資料">參考資料<a class="hash-link" aria-label="參考資料的直接連結" title="參考資料的直接連結" href="https://docsaid.org/blog/impl-normalized-levenshtein-similarity#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99">​</a></h2>
<ul>
<li><a href="https://lightning.ai/docs/torchmetrics/stable/text/edit.html" target="_blank" rel="noopener noreferrer"><strong>torchmetrics.text.EditDistance</strong></a></li>
</ul>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="python" term="python"/>
        <category label="pytorch" term="pytorch"/>
        <category label="metric" term="metric"/>
        <category label="anls" term="anls"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python 與 JS 的基本指令對應]]></title>
        <id>https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh</id>
        <link href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh"/>
        <updated>2024-04-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[把 Python 與 JS 的基本指令進行類似的對應。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0407-90a6d80a01fd87e299113822d538a210.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>我比較常使用的語言是 Python，其中常見的指令像是 <code>pip</code> 和 <code>python -m</code>，但最近開始學習 JavaScript 時，發現了類似功能的指令，像是 <code>npm</code>、<code>npx</code> 和 <code>nvm</code> 等。</p>
<p>我想試著對應這些指令，或許能更容易地轉換新技能。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="npm-與-pip">npm 與 pip<a class="hash-link" aria-label="npm 與 pip的直接連結" title="npm 與 pip的直接連結" href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh#npm-%E8%88%87-pip">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p><strong>它們都是：套件管理器</strong></p></div></div>
<p>npm（Node Package Manager）和 pip 本質上服務於相同的目的：它們分別為 Node.js 和 Python 的包管理器。包管理器對於共享、重用和管理代碼庫或模塊至關重要。</p>
<ul>
<li><strong>安裝包</strong>：在 npm 中，我們使用 <code>npm install &lt;package-name&gt;</code> 命令來為項目添加一個庫。同樣地，pip 通過 <code>pip install &lt;package-name&gt;</code> 實現相同的目標。</li>
<li><strong>版本管理</strong>：npm 通過 <code>package.json</code> 文件追蹤包版本，確保開發團隊的每個成員使用相同版本的庫。Pip 則依賴於 <code>requirements.txt</code> 或較新工具如 pipenv 和 poetry 來實現類似的功能。</li>
<li><strong>發布包</strong>：npm 使開發者能夠將他們的包發布到 npm 註冊處，使其可供全球 Node.js 社區使用。Pip 透過 PyPI（Python Package Index）提供此能力，允許分享 Python 包。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="npx-與--m-標誌">npx 與 -m 標誌<a class="hash-link" aria-label="npx 與 -m 標誌的直接連結" title="npx 與 -m 標誌的直接連結" href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh#npx-%E8%88%87--m-%E6%A8%99%E8%AA%8C">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p><strong>它們都是：直接執行命令的工具</strong></p></div></div>
<p>npx（npm package runner）和 Python 的 <code>-m</code> 標誌解決了直接在終端執行包命令的需求，無需進行全局安裝。</p>
<ul>
<li><strong>直接執行</strong>：npx 允許你直接從命令行執行項目本地 <code>node_modules</code> 文件夾中安裝的任何包（或者如果沒有安裝，則從 npm 註冊處獲取），Python 透過 <code>-m</code> 標誌實現類似結果，允許直接執行模塊，例如使用 <code>python -m http.server</code> 命令啟動一個簡單的 HTTP 服務器。</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>備註</div><div class="admonitionContent_BuS1"><p><strong>npm run 與 npx run</strong></p><ul>
<li>npm run：在 JavaScript 項目中，npm run 用於執行 package.json 文件中定義的腳本。這是一種執行項目特定任務（如測試、構建或部署）的常用方法。</li>
<li>npx run：雖然 npx 通常用於執行單個命令或包，但它主要用於直接執行未全局安裝的包。npx run 不是一個標準命令，npx 的常見用法不包括 run 關鍵字，而是直接跟隨包名或命令。</li>
</ul></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nvmpyenv-與-conda">nvm、pyenv 與 conda<a class="hash-link" aria-label="nvm、pyenv 與 conda的直接連結" title="nvm、pyenv 與 conda的直接連結" href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh#nvmpyenv-%E8%88%87-conda">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p><strong>它們都是：版本管理工具</strong></p></div></div>
<p>切換不同版本的 Node.js 或 Python 可能會非常麻煩。</p>
<p>nvm（Node Version Manager）、pyenv 和 conda 為此問題提供了解決方案，允許開發者在同一台機器上安裝並切換 Node.js 或 Python 的多個版本。</p>
<ul>
<li><strong>版本切換</strong>：nvm 使用諸如 <code>nvm use &lt;version&gt;</code> 的命令來切換 Node.js 版本。Pyenv 和 conda 為 Python 提供了類似的功能，pyenv 通過 <code>pyenv global &lt;version&gt;</code> 或 <code>pyenv local &lt;version&gt;</code> 來進行版本切換，而 conda 則使用 <code>conda activate &lt;environment-name&gt;</code> 切換到不同的環境，每個環境可以擁有不同的 Python 版本和包。</li>
<li><strong>多版本管理</strong>：這些工具促進了在同一台機器上管理多個版本，解決了因版本差異可能導致的衝突問題。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="題外話還有-yarn-呢">題外話：還有 yarn 呢？<a class="hash-link" aria-label="題外話：還有 yarn 呢？的直接連結" title="題外話：還有 yarn 呢？的直接連結" href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh#%E9%A1%8C%E5%A4%96%E8%A9%B1%E9%82%84%E6%9C%89-yarn-%E5%91%A2">​</a></h2>
<p>npm 於 2009 年誕生，是 Node.js 生態系統中首個主要的包管理器。npm 的出現解決了 JavaScript 開發者管理依賴包的需求，迅速成為行業標準。然而，隨著使用者數量的增長，npm 暴露出了一些性能問題，如安裝速度慢和依賴版本不穩定。</p>
<p>Yarn 於 2016 年由 Facebook 開發，目的是在解決 npm 的性能瓶頸。Yarn 引入了並行下載、離線快取等技術，大幅提升了依賴安裝速度和穩定性。此外，Yarn 還增加了 yarn.lock 文件，確保依賴包版本的一致性。這些改進使得 Yarn 迅速獲得了開發者的青睞。</p>
<p>隨著 Yarn 的成功，npm 也加快了自身的改進步伐。從 npm v5 開始，npm 引入了 package-lock.json，提升了安裝速度並增強了依賴管理的穩定性。至今，npm 和 Yarn 已經成為 JavaScript 開發者的兩大主要選擇，並且都在不斷進步，互相借鑒對方的優點。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結論">結論<a class="hash-link" aria-label="結論的直接連結" title="結論的直接連結" href="https://docsaid.org/blog/npm-npx-nvm-python-analogues-zh#%E7%B5%90%E8%AB%96">​</a></h2>
<p>當我在學習新的語言或框架時，我總是喜歡將其與我已經熟悉的工具進行對應。這樣做有助於我更快地理解新工具的功能和用法，並且幫助我更快地上手。</p>
<p>這些指令可能不能百分之百地對應，但它們確實有一些相似之處，加減能幫上一點忙吧。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="npm" term="npm"/>
        <category label="npx" term="npx"/>
        <category label="nvm" term="nvm"/>
        <category label="pip" term="pip"/>
        <category label="pyenv" term="pyenv"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[常用的 VScode 參數設定]]></title>
        <id>https://docsaid.org/blog/vscode-settings</id>
        <link href="https://docsaid.org/blog/vscode-settings"/>
        <updated>2024-03-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[記錄常用的 VScode 參數設定，以便日後使用。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0331-15273b8f0cbdc3049d3bef3d146e2838.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>不久前，因為不明原因導致我的 VScode 設定檔消失。費了我一小時又重新設定了一次。</p>
<p>剛好也讓我有機會重新檢視一下自己的設定檔，並且將一些常用的設定檔記錄下來。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="設定檔">設定檔<a class="hash-link" aria-label="設定檔的直接連結" title="設定檔的直接連結" href="https://docsaid.org/blog/vscode-settings#%E8%A8%AD%E5%AE%9A%E6%AA%94">​</a></h2>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.fontFamily": "Fira Code, MesloLGS NF",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.fontLigatures": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "files.associations": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Dockerfile_base": "dockerfile"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "markdown.preview.fontSize": 15,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "debug.console.fontSize": 14,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "explorer.confirmDragAndDrop": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.minimap.enabled": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.minimap.maxColumn": 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.smoothScrolling": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.rulers": [80, 120],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "workbench.colorCustomizations": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "editorRuler.foreground": "#ff4081",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "minimap.background": "#00000050",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "editor.background": "#1e1e1e",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "editor.foreground": "#d4d4d4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "terminal.integrated.fontFamily": "Fira Code, MesloLGS NF",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "files.trimTrailingWhitespace": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "files.trimFinalNewlines": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "diffEditor.ignoreTrimWhitespace": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "python.terminal.activateEnvironment": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "git.ignoreLegacyWarning": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "git.autofetch": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.largeFileOptimizations": false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.mouseWheelZoom": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.codeActionsOnSave": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "source.organizeImports": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "source.fixAll": true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.formatOnSave": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "workbench.editorAssociations": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "*.ipynb": "jupyter-notebook"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "debug.onTaskErrors": "abort",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "explorer.confirmDelete": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "terminal.integrated.copyOnSelection": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "terminal.integrated.cursorBlinking": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "terminal.integrated.cursorStyle": "line",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "remote.downloadExtensionsLocally": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "terminal.integrated.scrollback": 10000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.cursorStyle": "line",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.insertSpaces": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.lineNumbers": "on",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.wordWrap": "on",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "workbench.editor.wrapTabs": false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "files.watcherExclude": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "**/.git/objects/**": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "**/.git/subtree-cache/**": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "**/node_modules/*/**": true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "notebook.cellToolbarLocation": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "default": "right",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "jupyter-notebook": "left"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "github.copilot.editor.enableAutoCompletions": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "github.copilot.enable": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "*": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "plaintext": false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "markdown": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "scminput": false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "workbench.colorTheme": "Monokai Pro",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.multiCursorModifier": "ctrlCmd",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "editor.wordWrapColumn": 120,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "files.autoSave": "onFocusChange"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="參數說明">參數說明<a class="hash-link" aria-label="參數說明的直接連結" title="參數說明的直接連結" href="https://docsaid.org/blog/vscode-settings#%E5%8F%83%E6%95%B8%E8%AA%AA%E6%98%8E">​</a></h2>
<ul>
<li>
<p><code>editor.fontFamily</code>：設定字體，這裡使用了 Fira Code 和 MesloLGS NF 字體。</p>
</li>
<li>
<p><code>editor.fontLigatures</code>：設定是否啟用字體連字。</p>
</li>
<li>
<p><code>files.associations</code>：設定檔案關聯，這裡將 Dockerfile_base 關聯到 dockerfile。</p>
</li>
<li>
<p><code>markdown.preview.fontSize</code>：設定 markdown 預覽的字體大小。</p>
</li>
<li>
<p><code>debug.console.fontSize</code>：設定 debug console 的字體大小。</p>
</li>
<li>
<p><code>explorer.confirmDragAndDrop</code>：設定是否確認拖放。</p>
</li>
<li>
<p><code>editor.minimap.enabled</code>：設定是否啟用縮略圖。</p>
</li>
<li>
<p><code>editor.minimap.maxColumn</code>：設定縮略圖的最大列數。</p>
</li>
<li>
<p><code>editor.smoothScrolling</code>：設定是否啟用平滑滾動。</p>
</li>
<li>
<p><code>editor.rulers</code>：設定縮排對齊的列數。</p>
</li>
<li>
<p><code>workbench.colorCustomizations</code>：設定顏色自定義。</p>
</li>
<li>
<p><code>terminal.integrated.fontFamily</code>：設定終端字體。</p>
</li>
<li>
<p><code>files.trimTrailingWhitespace</code>：設定是否刪除行尾空格。</p>
</li>
<li>
<p><code>files.trimFinalNewlines</code>：設定是否刪除最後一行的空行。</p>
</li>
<li>
<p><code>diffEditor.ignoreTrimWhitespace</code>：設定是否忽略空格。</p>
</li>
<li>
<p><code>python.terminal.activateEnvironment</code>：設定是否啟用 Python 環境。</p>
</li>
<li>
<p><code>git.ignoreLegacyWarning</code>：設定是否忽略 Git 警告。</p>
</li>
<li>
<p><code>git.autofetch</code>：設定是否自動更新。</p>
</li>
<li>
<p><code>editor.largeFileOptimizations</code>：設定是否優化大文件。</p>
</li>
<li>
<p><code>editor.mouseWheelZoom</code>：設定是否滑鼠滾輪縮放。</p>
</li>
<li>
<p><code>editor.codeActionsOnSave</code>：設定保存時的代碼操作。</p>
</li>
<li>
<p><code>editor.formatOnSave</code>：設定保存時是否格式化。</p>
</li>
<li>
<p><code>workbench.editorAssociations</code>：設定編輯器關聯。</p>
</li>
<li>
<p><code>debug.onTaskErrors</code>：設定任務錯誤時的操作。</p>
</li>
<li>
<p><code>explorer.confirmDelete</code>：設定是否確認刪除。</p>
</li>
<li>
<p><code>terminal.integrated.copyOnSelection</code>：設定是否選中即複製。</p>
</li>
<li>
<p><code>terminal.integrated.cursorBlinking</code>：設定終端光標閃爍。</p>
</li>
<li>
<p><code>terminal.integrated.cursorStyle</code>：設定終端光標樣式。</p>
</li>
<li>
<p><code>remote.downloadExtensionsLocally</code>：設定是否本地下載擴展。</p>
</li>
<li>
<p><code>terminal.integrated.scrollback</code>：設定終端滾動緩衝區大小。</p>
</li>
<li>
<p><code>editor.cursorStyle</code>：設定光標樣式。</p>
</li>
<li>
<p><code>editor.insertSpaces</code>：設定是否插入空格。</p>
</li>
<li>
<p><code>editor.lineNumbers</code>：設定是否顯示行號。</p>
</li>
<li>
<p><code>editor.wordWrap</code>：設定是否自動換行。</p>
</li>
<li>
<p><code>workbench.editor.wrapTabs</code>：設定是否換行標籤。</p>
</li>
<li>
<p><code>files.watcherExclude</code>：設定文件監視排除。</p>
</li>
<li>
<p><code>notebook.cellToolbarLocation</code>：設定筆記本工具欄位置。</p>
</li>
<li>
<p><code>github.copilot.editor.enableAutoCompletions</code>：設定是否啟用自動完成。</p>
</li>
<li>
<p><code>github.copilot.enable</code>：設定是否啟用 GitHub Copilot。</p>
</li>
<li>
<p><code>workbench.colorTheme</code>：設定顏色主題。</p>
</li>
<li>
<p><code>editor.multiCursorModifier</code>：設定多光標修改器。</p>
</li>
<li>
<p><code>editor.wordWrapColumn</code>：設定自動換行的列數。</p>
</li>
<li>
<p><code>files.autoSave</code>：設定自動保存。</p>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結語">結語<a class="hash-link" aria-label="結語的直接連結" title="結語的直接連結" href="https://docsaid.org/blog/vscode-settings#%E7%B5%90%E8%AA%9E">​</a></h2>
<p>以上是我常用的 VScode 參數設定。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="vscode" term="vscode"/>
        <category label="settings" term="settings"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[搭建 Nextcloud 記錄]]></title>
        <id>https://docsaid.org/blog/setup-nextcloud</id>
        <link href="https://docsaid.org/blog/setup-nextcloud"/>
        <updated>2024-03-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[記錄 Ubuntu 22.04 上搭建 Nextcloud 的過程。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0304-8ff2e735131721af1809a39fc20648cd.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>之前我都把檔案放在 Google Drive 上，下載檔案的時候會透過 wget 指令來下載。</p>
<p>直到某一天，原本的下載指令突然就不能用了...</p>
<p>既然如此，那我們來試試看 Nextcloud。</p>
<p>以下我們基於 Ubuntu 22.04 來進行相關配置。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>在開始之前，請你準備好一個域名，並且把這個域名指向你的伺服器。</p><p>如果不知道該怎麼做，請直接 Google 搜尋『namecheap 怎麼用』。</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝-nextcloud">安裝 Nextcloud<a class="hash-link" aria-label="安裝 Nextcloud的直接連結" title="安裝 Nextcloud的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E5%AE%89%E8%A3%9D-nextcloud">​</a></h2>
<p><strong>第一問：為什麼要用 Nextcloud？</strong></p>
<ul>
<li>我想要一個私有雲，不想要把檔案放在別人的伺服器上。</li>
</ul>
<p><strong>第二問：Nextcloud 跟 Owncloud 有什麼不一樣？</strong></p>
<ul>
<li>Nextcloud 是由 Owncloud 的開發者分家出來的，兩者的功能差不多，但 Nextcloud 的開發速度比較快。</li>
</ul>
<p><strong>第三問：Nextcloud 要怎麼安裝？</strong></p>
<ul>
<li>這個問題比較複雜，因為 Nextcloud 的安裝方式有很多種，而且每一種都有不同的優缺點。</li>
<li>在本篇文章中，我唯一推薦的安裝方式是使用 Docker。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="設定-nextcloud-all-in-one">設定 Nextcloud All-in-One<a class="hash-link" aria-label="設定 Nextcloud All-in-One的直接連結" title="設定 Nextcloud All-in-One的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E8%A8%AD%E5%AE%9A-nextcloud-all-in-one">​</a></h2>
<ul>
<li>參考官方文件：<a href="https://github.com/nextcloud/all-in-one" target="_blank" rel="noopener noreferrer"><strong>Nextcloud All-in-One</strong></a></li>
</ul>
<p>首先確保你已經安裝了 Docker 和 Docker Compose。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>如果還沒有完成，請 Google 搜尋 『Docker &amp; Docker Compose 安裝方法』。</p></div></div>
<p>接著，建立一個 NextCloud 資料夾，然後寫一個 Docker Compose 的設定檔 <code>docker-compose.yml</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vim nextcloud/docker-compose.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>把以下的內容貼到 <code>docker-compose.yml</code> 裡面：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud-aio-mastercontainer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud/all</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">in</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">one</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">init</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mastercontainer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nextcloud_aio_mastercontainer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/mnt/docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">80:80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8443</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nextcloud_aio_mastercontainer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nextcloud_aio_mastercontainer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>簡要說明一下上面的指令內容：</p>
<ul>
<li><code>--init</code>：選項確保永遠不會建立殭屍行程。</li>
<li><code>--name nextcloud-aio-mastercontainer</code>：設定容器的名稱，這個名稱不允許更改，因為更改後可能會導致 mastercontainer 更新失敗。</li>
<li><code>--restart always</code>：設定容器的重啟策略為始終隨 Docker 守護程序一起啟動。</li>
<li><code>--publish 80:80</code>：將容器的 80 端口發佈到宿主機的 80 端口，用於獲取 AIO 接口的有效證書，如果不需要可以移除。</li>
<li><code>--publish 8080:8080</code>：將容器的 8080 端口發佈到宿主機的 8080 端口，此端口用於 AIO 接口，預設使用自簽名證書。 如果 8080 端口已被佔用，可以更改宿主機的端口，如：<code>--publish 8081:8080</code>。</li>
<li><code>--publish 8443:8443</code>：將容器的 8443 端口發佈到宿主機的 8443 端口，如果公開到網路，可以通過此端口訪問 AIO 接口並獲取有效證書，如果不需要可以移除。</li>
<li><code>--volume nextcloud_aio_mastercontainer:/mnt/docker-aio-config</code>：設定 mastercontainer 建立的檔案將儲存在名為 nextcloud_aio_mastercontainer 的 docker 磁碟區中，此設定不允許變更。</li>
<li><code>--volume /var/run/docker.sock:/var/run/docker.sock:ro</code>：將 docker 套接字掛載到容器內，用於啟動所有其他容器和其他功能。 在 Windows/macOS 和 docker 無根模式下需要調整。</li>
<li><code>nextcloud/all-in-one:latest</code>：指定使用的 Docker 容器映像。</li>
</ul>
<p>還有更多詳細的設定，請參考官方文件：<a href="https://github.com/nextcloud/all-in-one/blob/main/compose.yaml" target="_blank" rel="noopener noreferrer">compose.yaml</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="設定系統服務">設定系統服務<a class="hash-link" aria-label="設定系統服務的直接連結" title="設定系統服務的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E8%A8%AD%E5%AE%9A%E7%B3%BB%E7%B5%B1%E6%9C%8D%E5%8B%99">​</a></h2>
<p>完成了上述的設定之後，再來是設定系統服務。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /etc/systemd/system/nexcloud.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>貼上以下的內容：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=NextCloud Docker Compose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/home/[YourName]/nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/bin/docker compose up --remove-orphans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStop=/usr/bin/docker compose down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="啟動-nextcloud">啟動 Nextcloud<a class="hash-link" aria-label="啟動 Nextcloud的直接連結" title="啟動 Nextcloud的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E5%95%9F%E5%8B%95-nextcloud">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable nextcloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start nextcloud</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="設定-nextcloud">設定 Nextcloud<a class="hash-link" aria-label="設定 Nextcloud的直接連結" title="設定 Nextcloud的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E8%A8%AD%E5%AE%9A-nextcloud">​</a></h2>
<ol>
<li>
<p><strong>訪問 Nextcloud AIO 介面</strong>：</p>
<ul>
<li>在初始啟動後，你可以通過訪問 <code>https://ip.address.of.this.server:8080</code> 來開啟 Nextcloud AIO 介面，其中 <code>ip.address.of.this.server</code> 應該被替換為部署 Nextcloud 服務的伺服器的 IP 地址。</li>
<li>重要的是使用 IP 地址而非域名來訪問這個連接埠（8080），因為 HTTP Strict Transport Security（HSTS）可能會阻止使用域名訪問。HSTS 是一種 Web 安全政策機制，它要求網絡瀏覽器僅通過安全的 HTTPS 連接與網站建立連接。</li>
</ul>
</li>
<li>
<p><strong>自簽名證書的使用</strong>：</p>
<ul>
<li>訪問 8080 端口時，可能會使用自簽名證書來確保通信的安全性。自簽名證書不是由受信任的證書機構（CA）發行的，因此瀏覽器可能會警告這個證書不可信。你需要在瀏覽器中手動接受這個證書，以便繼續訪問。</li>
</ul>
</li>
<li>
<p><strong>獲取有效證書的自動化方式</strong>：</p>
<ul>
<li>如果你的防火牆或路由器已開放或轉發了 80 和 8443 端口，並且你已經將一個域名指向你的伺服器，那麼你可以通過訪問<code>https://your-domain-that-points-to-this-server.tld:8443</code>來自動獲取一個由受信任 CA 發行的有效證書，以增加安全性和便利性。這裡的<code>your-domain-that-points-to-this-server.tld</code>應該替換為你指向伺服器的實際域名。</li>
</ul>
</li>
<li>
<p><strong>Nextcloud Talk 的連接埠開放</strong>：</p>
<ul>
<li>為了確保 Nextcloud Talk 功能（如視訊通話和訊息）能夠正常運作，特別提到了需要在防火牆或路由器中為 Talk 容器開放 3478/TCP 和 3478/UDP 連接埠。</li>
<li>這些連接埠對於處理 NAT 穿越至關重要，NAT 穿越是一種技術，允許網絡內外的裝置直接連接，這對於實時通信應用（如視訊通話）是必需的。</li>
</ul>
</li>
</ol>
<ul>
<li>
<p><strong>常見問題：</strong></p>
<ul>
<li>
<p><strong>家用網路是動態 IP，怎麼指向域名？</strong></p>
<ul>
<li>我有試過一些 No-IP 的方法，後來覺得直接去中華電信申請固定 IP 最快最方便。</li>
</ul>
</li>
<li>
<p><strong>我不想用 Docker，有沒有其他方法？</strong></p>
<ul>
<li>有，你可以直接安裝 Nextcloud，你需要自己來處理所有的依賴問題。</li>
<li>相信我，很多坑。</li>
</ul>
</li>
<li>
<p><strong>為什麼架好了卻連不上？</strong></p>
<ul>
<li>你的防火牆擋住了，如果防火牆沒開，那就是你的路由器擋住了。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p>輸入設定網址，你可以進入一個比後台還要後台的地方。</p>
<p><img decoding="async" loading="lazy" alt="login_1" src="https://docsaid.org/assets/images/login_1-edb2b961d180558b75e337c1083a7202.jpg" width="1224" height="824" class="img_ev3q"></p>
<p>到這一步，你可能會驚恐地發現：『我沒有密碼啊！』</p>
<p>密碼會在你第一次登入的時候給你，但通常你會錯過他。這時候你可以透過以下的指令來找到密碼：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo grep password /var/lib/docker/volumes/nextcloud_aio_mastercontainer/_data/data/configuration.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>登入之後，你會看到一個設定畫面：</p>
<p><img decoding="async" loading="lazy" alt="login_2" src="https://docsaid.org/assets/images/login_2-6e2d377746b11b87dcd476a7db06ecb2.jpg" width="1224" height="696" class="img_ev3q"></p>
<p>你看到的這個畫面已經是我設定完成的結果，如果你是第一次登入，在這裡，首先你要先輸入你之前準備好的網域，接著系統會要你再次下載一些 docker image，下載完成後，它會幫你啟動。</p>
<p>啟動之後，你就可以開始使用 Nextcloud 了。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結語">結語<a class="hash-link" aria-label="結語的直接連結" title="結語的直接連結" href="https://docsaid.org/blog/setup-nextcloud#%E7%B5%90%E8%AA%9E">​</a></h2>
<p>完成上面的步驟之後，在網址列中輸入你的網域後，你會看到一個很好看的介面，這個介面就是你的私有雲。</p>
<p><img decoding="async" loading="lazy" alt="login_3" src="https://docsaid.org/assets/images/login_3-b4f2e8aa169715059997b910227d0773.jpg" width="2777" height="1595" class="img_ev3q"></p>
<p>這個介面有很多功能，你可以透過這個介面來管理你的檔案，也可以透過這個介面來分享檔案。除此之外，你可以在手機上下載 Nextcloud 的 App，然後你可以直接透過手機來管理你的檔案。</p>
<p>有了 Nextcloud，你就不需要再擔心 Google Drive 的容量限制了。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="Nextcloud" term="Nextcloud"/>
        <category label="Docker" term="Docker"/>
        <category label="Ubuntu" term="Ubuntu"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[PyTorch 的 List 陷阱]]></title>
        <id>https://docsaid.org/blog/pytorch-training-out-of-memory</id>
        <link href="https://docsaid.org/blog/pytorch-training-out-of-memory"/>
        <updated>2024-02-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[發現與解決 PyTorch OOM 問題。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0220-4d2f7cd9eb321330653be4207feb6758.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>身為一個專業的 PyTorch 使用者，你應該早已經熟悉了如何訓練模型，如何調參，如何優化等技巧。</p>
<p>怎麼可能還會寫出 OOM（Out of Memory）的程式呢？</p>
<hr>
<ul>
<li>請注意，這裡我們講的是系統的記憶體，不是 GPU 的記憶體。</li>
<li>當然，GPU 的記憶體也是一個常見的問題，但這裡我們不談這個。</li>
</ul>
<hr>
<p>由於 OOM 的成因太多，這次我們就只講一個專業工作者也常會遇到的問題：</p>
<ul>
<li>你可能用了 List 結構啦！</li>
</ul>
<p>經過調查，我們找到了洩漏發生時的確切場景。</p>
<p>考慮下面的程式碼範例：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DataLoader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DataIter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data_np </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> x </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> x </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__len__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__getitem__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">int64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">train_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DataIter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">train_loader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">train_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num_workers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">train_loader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>看完這個例子，不廢話，直接講結論：</p>
<p>看到 <code>self.data</code> 這個 List 了嗎？這個 List 會導致 OOM 問題。</p>
<p>我們試著翻找了一下相關資料，發現這似乎不是 Pytorch 的問題，而是 Python 的問題。</p>
<p>總之，不要用 List，改用 Numpy 或者 Tensor 來存儲數據，這樣就不會出現 OOM 問題了。</p>
<p>至少在這個例子中，這樣做是有效的。</p>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="我也是這樣寫為什麼什麼事情都沒有發生">我也是這樣寫，為什麼什麼事情都沒有發生？<a class="hash-link" aria-label="我也是這樣寫，為什麼什麼事情都沒有發生？的直接連結" title="我也是這樣寫，為什麼什麼事情都沒有發生？的直接連結" href="https://docsaid.org/blog/pytorch-training-out-of-memory#%E6%88%91%E4%B9%9F%E6%98%AF%E9%80%99%E6%A8%A3%E5%AF%AB%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BB%80%E9%BA%BC%E4%BA%8B%E6%83%85%E9%83%BD%E6%B2%92%E6%9C%89%E7%99%BC%E7%94%9F">​</a></h2>
<p>世界很美好，直到你遇到了一個大數據集。</p>
<p>就我自己的測試的結果來看，當數據量小的時候，用 List 不會出現記憶體洩漏的問題。</p>
<p>更具體來說，我使用一萬多筆數據的時候，沒問題；使用一百多萬筆數據的時候就爆了。</p>
<p>所以，如果你的數據量不大，你可能永遠不會遇到這個問題。</p>
<p>至於數據多寡的分界點，我也不知道，我推估這是 Python 或是 PyTorch 在交互的某個時刻才會出現的異常。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="PyTorch" term="PyTorch"/>
        <category label="OOM" term="OOM"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 Python 把 PDF 轉圖片]]></title>
        <id>https://docsaid.org/blog/read-pdf-to-images</id>
        <link href="https://docsaid.org/blog/read-pdf-to-images"/>
        <updated>2024-02-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[使用開源套件 pdf2image 來解決問題。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0214-092b2fec73ca8d417478a30be2c25464.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>在日常辦公或學習中，無論是為了更便捷地分享資訊，還是將文件內容整合進演示文稿中，我們經常需要將 PDF 檔案轉換成圖片格式。</p>
<p>這裡我們推薦一個好用的 Python 模組： <a href="https://github.com/Belval/pdf2image/tree/master" target="_blank" rel="noopener noreferrer">pdf2image</a> ，它能夠將 PDF 檔案轉換成 PIL 圖片。</p>
<p>這篇教學將引導你如何安裝並使用這個套件。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝依賴">安裝依賴<a class="hash-link" aria-label="安裝依賴的直接連結" title="安裝依賴的直接連結" href="https://docsaid.org/blog/read-pdf-to-images#%E5%AE%89%E8%A3%9D%E4%BE%9D%E8%B3%B4">​</a></h2>
<p><code>pdf2image</code> 依賴於 <code>pdftoppm</code> 和 <code>pdftocairo</code>，不同作業系統的安裝方式略有不同：</p>
<ul>
<li><strong>Mac</strong>：通過 Homebrew 安裝 Poppler：<code>brew install poppler</code>。</li>
<li><strong>Linux</strong>：大多數 Linux 發行版已預裝 <code>pdftoppm</code> 和 <code>pdftocairo</code>。若未安裝，請透過包管理器安裝 <code>poppler-utils</code>。</li>
<li><strong>使用 <code>conda</code></strong>：無論哪個平台，都可以使用 <code>conda</code> 安裝 Poppler：<code>conda install -c conda-forge poppler</code>，然後再安裝 <code>pdf2image</code>。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝-pdf2image">安裝 <code>pdf2image</code><a class="hash-link" aria-label="安裝-pdf2image的直接連結" title="安裝-pdf2image的直接連結" href="https://docsaid.org/blog/read-pdf-to-images#%E5%AE%89%E8%A3%9D-pdf2image">​</a></h2>
<p>首先，你需要安裝 <code>pdf2image</code>，在終端機中輸入以下指令即可安裝：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install pdf2image</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用-pdf2image-轉換-pdf">使用 <code>pdf2image</code> 轉換 PDF<a class="hash-link" aria-label="使用-pdf2image-轉換-pdf的直接連結" title="使用-pdf2image-轉換-pdf的直接連結" href="https://docsaid.org/blog/read-pdf-to-images#%E4%BD%BF%E7%94%A8-pdf2image-%E8%BD%89%E6%8F%9B-pdf">​</a></h2>
<p>轉換 PDF 至圖片的基本用法非常簡單：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pdf2image </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> convert_from_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">images </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> convert_from_path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/path/to/your/pdf/file.pdf'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這將把 PDF 的每一頁轉換成一個 PIL 圖片對象，並儲存在 <code>images</code> 列表中。</p>
<p>你也可以從二進制數據轉換 PDF：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">images </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> convert_from_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/path/to/your/pdf/file.pdf'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'rb'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="可選參數">可選參數<a class="hash-link" aria-label="可選參數的直接連結" title="可選參數的直接連結" href="https://docsaid.org/blog/read-pdf-to-images#%E5%8F%AF%E9%81%B8%E5%8F%83%E6%95%B8">​</a></h2>
<p><code>pdf2image</code> 提供了豐富的可選參數，允許你自定義 DPI、輸出格式、頁面範圍等。例如：使用 <code>dpi=300</code> 提高輸出圖片的清晰度，或者使用 <code>first_page</code> 和 <code>last_page</code> 指定轉換範圍。</p>
<p>你可以參考 <code>pdf2image</code> 的<a href="https://github.com/Belval/pdf2image/tree/master" target="_blank" rel="noopener noreferrer">官方文件</a>；或是參考我們自己改寫的 <a href="https://github.com/DocsaidLab/DocsaidKit/blob/eb8ac0a56779a75dcc951c683001e6129052cc5a/docsaidkit/vision/improc.py#L275" target="_blank" rel="noopener noreferrer">pdf2imgs</a> 函數來了解更多用法。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結語">結語<a class="hash-link" aria-label="結語的直接連結" title="結語的直接連結" href="https://docsaid.org/blog/read-pdf-to-images#%E7%B5%90%E8%AA%9E">​</a></h2>
<p><code>pdf2image</code> 是一個功能強大且易於使用的工具，能夠滿足你將 PDF 轉換為圖片的需求。無論是用於文檔處理、資料整理，還是內容展示，它都能提供高效的解決方案。</p>
<p>希望這篇教學能夠幫助你輕鬆掌握 <code>pdf2image</code> 的使用，提高你的工作與學習效率。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="Python" term="Python"/>
        <category label="PDF" term="PDF"/>
        <category label="pdf2image" term="pdf2image"/>
        <category label="PIL" term="PIL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[用 Python 讀取 HEIC 圖檔]]></title>
        <id>https://docsaid.org/blog/opencv-imread</id>
        <link href="https://docsaid.org/blog/opencv-imread"/>
        <updated>2024-02-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[來優化一下 OpenCV imread 吧！]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0213-ccba02633c06b5ebe379db358fc45ace.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>當你想要讀取一張影像時，你可能會使用 OpenCV 的 <code>imread</code> 函數。這個函數非常方便，它可以讀取多種格式的影像，並且可以直接將影像讀取到 <code>numpy.ndarray</code> 類型的變數中。然而，這個函數並不是萬能的，有時候你可能會遇到一些問題。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="基礎用法">基礎用法<a class="hash-link" aria-label="基礎用法的直接連結" title="基礎用法的直接連結" href="https://docsaid.org/blog/opencv-imread#%E5%9F%BA%E7%A4%8E%E7%94%A8%E6%B3%95">​</a></h2>
<p><code>imread</code> 函數的基礎用法非常簡單，你只需要傳入影像的路徑即可：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">imread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path/to/image.jpg'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中，你可以使用的影像格式包括：BMP, JPG, PNG, TIF 等常見影像格式。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="限制一heic-格式">限制一：HEIC 格式<a class="hash-link" aria-label="限制一：HEIC 格式的直接連結" title="限制一：HEIC 格式的直接連結" href="https://docsaid.org/blog/opencv-imread#%E9%99%90%E5%88%B6%E4%B8%80heic-%E6%A0%BC%E5%BC%8F">​</a></h2>
<p>在 iOS 裝置上拍攝的照片通常是 HEIC 格式，這種格式在 OpenCV 中是不支援的。如果你嘗試使用 <code>imread</code> 函數讀取 HEIC 格式的影像，你會得到一個 <code>None</code> 的返回值。</p>
<p>為了解決這個問題，我們得用 pyheif 這個套件來讀取 HEIC 格式的影像，然後再將其轉換成 <code>numpy.ndarray</code> 類型的變數。</p>
<p>首先，我們安裝必要套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install libheif-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install pyheif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接著寫個簡單的函數：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pyheif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">read_heic_to_numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    heif_file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pyheif</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mode </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"RGB"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        numpy_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frombuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reshape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mode </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"RGBA"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        numpy_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frombuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uint8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reshape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> heif_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Unsupported HEIC color mode"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> numpy_array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> read_heic_to_numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path/to/image.heic'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cvtColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">COLOR_RGB2BGR</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="限制二jpg-讀取慢">限制二：JPG 讀取慢<a class="hash-link" aria-label="限制二：JPG 讀取慢的直接連結" title="限制二：JPG 讀取慢的直接連結" href="https://docsaid.org/blog/opencv-imread#%E9%99%90%E5%88%B6%E4%BA%8Cjpg-%E8%AE%80%E5%8F%96%E6%85%A2">​</a></h2>
<p>在某些情況下，<code>imread</code> 函數讀取 JPG 格式的影像速度會非常慢。這是因為 OpenCV 在讀取 JPG 格式的影像時，會使用 libjpeg 這個庫，而 libjpeg 本身的效能就不是很好。</p>
<p>在這邊，我們引入 TurboJPEG 這個套件，它是 libjpeg 的一個替代品，效能更好。我們可以使用 TurboJPEG 來加速讀取 JPG 格式的影像。</p>
<p>跟之前一樣，我們先安裝必要套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install libturbojpeg exiftool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pip install PyTurboJPEG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再來我們寫一點程式，幫他加速一下：</p>
<p>一般來說，可以加速大約 2-3 倍。</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> piexif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> enum </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> IntEnum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pathlib </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> turbojpeg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TurboJPEG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jpeg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TurboJPEG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ROTATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IntEnum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ROTATE_90 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_90_CLOCKWISE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ROTATE_180 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_180</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ROTATE_270 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_90_COUNTERCLOCKWISE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">imrotate90</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rotate_code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ROTATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">copy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rotate_code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_orientation_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stream</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">bytes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exif_dict </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> piexif</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> piexif</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ImageIFD</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Orientation </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> exif_dict</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"0th"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            orientation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> exif_dict</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"0th"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">piexif</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ImageIFD</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Orientation</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> orientation </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ROTATE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_180</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> orientation </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ROTATE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> orientation </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ROTATE</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ROTATE_270</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">jpgdecode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">byte_</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bgr_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jpeg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">byte_</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_orientation_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">byte_</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bgr_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imrotate90</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bgr_array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> code </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> bgr_array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bgr_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bgr_array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">jpgread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'rb'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        binary_img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bgr_array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jpgdecode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">binary_img</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bgr_array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jpgread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path/to/image.jpg'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣就可以加速讀取 JPG 格式的影像了。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結語">結語<a class="hash-link" aria-label="結語的直接連結" title="結語的直接連結" href="https://docsaid.org/blog/opencv-imread#%E7%B5%90%E8%AA%9E">​</a></h2>
<p>那如果我們希望這個程式可以智能一點，自己選一個適合載入的方式呢？</p>
<p>我們可以寫一個函數，根據影像的格式來選擇合適的載入方式：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">imread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    color_base</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'BGR'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    verbose</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Union</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ndarray</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> FileExistsError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f'</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">path</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> can not found.'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> Path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">suffix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.heic'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> read_heic_to_numpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cvtColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">COLOR_RGB2BGR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> jpgread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">imread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> verbose</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            warnings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Got a None type image."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> color_base </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'BGR'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imcvtcolor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cvt_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string-interpolation string" style="color:#e3116c">f'BGR2</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">color_base</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>詳細程式碼可以參考：<a href="https://github.com/DocsaidLab/DocsaidKit/blob/eb8ac0a56779a75dcc951c683001e6129052cc5a/docsaidkit/vision/improc.py#L197" target="_blank" rel="noopener noreferrer">imread.py</a></p>
<p>以上就是關於 OpenCV 的 <code>imread</code> 函數的一些限制和解決方法，希望對你有所幫助。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="Python" term="Python"/>
        <category label="imread" term="imread"/>
        <category label="HEIC" term="HEIC"/>
        <category label="TurboJPEG" term="TurboJPEG"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[日常錯誤排除紀錄]]></title>
        <id>https://docsaid.org/blog/error-record</id>
        <link href="https://docsaid.org/blog/error-record"/>
        <updated>2024-02-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[紀錄一些簡單問題和解法。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0204-6c7cdd55509588a72be8f27a8a51a803.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>我們總是會遇到一堆問題。有些問題是我們自己造成的，有些問題是別人造成的，有些問題是我們無法控制的。這裡紀錄一些簡單問題和解決方法。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>本文章會持續更新。</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-執行-npx-docusaurus-start-時出現以下錯誤">1. 執行 <code>npx docusaurus start</code> 時出現以下錯誤<a class="hash-link" aria-label="1-執行-npx-docusaurus-start-時出現以下錯誤的直接連結" title="1-執行-npx-docusaurus-start-時出現以下錯誤的直接連結" href="https://docsaid.org/blog/error-record#1-%E5%9F%B7%E8%A1%8C-npx-docusaurus-start-%E6%99%82%E5%87%BA%E7%8F%BE%E4%BB%A5%E4%B8%8B%E9%8C%AF%E8%AA%A4">​</a></h2>
<ul>
<li>
<p><strong>錯誤訊息：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">file:///home/user/workspace/blog/node_modules/@docusaurus/core/bin/docusaurus.mjs:30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process.env.BABEL_ENV ??= 'development';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SyntaxError: Unexpected token '??='</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>解決方法：</strong></p>
<p><code>??=</code> 操作符需要 Node.js 15.0.0 或更高版本才能支持。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nvm install node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvm use node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="error" term="error"/>
        <category label="record" term="record"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[容器下的使用者切換工具：gosu]]></title>
        <id>https://docsaid.org/blog/gosu-usage</id>
        <link href="https://docsaid.org/blog/gosu-usage"/>
        <updated>2024-02-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[這麼好用的工具，肯定要學習一下。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0203-ee58f02227c5bb39005c313c2fa21c5e.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>Docker 技術已經大量的應用在部署和管理上，這種技術允許開發者將應用及其依賴打包在一起，確保在不同的環境中一致地運行。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="常見問題">常見問題<a class="hash-link" aria-label="常見問題的直接連結" title="常見問題的直接連結" href="https://docsaid.org/blog/gosu-usage#%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C">​</a></h2>
<p>然而，如果你很常用，你一定躲不開幾個常見的問題。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tty-轉換">TTY 轉換<a class="hash-link" aria-label="TTY 轉換的直接連結" title="TTY 轉換的直接連結" href="https://docsaid.org/blog/gosu-usage#tty-%E8%BD%89%E6%8F%9B">​</a></h3>
<p>一個比較常見的情況是，當你在容器中輸出了某個檔案。</p>
<p>接著離開容器，然後發現檔案的權限都是 root？</p>
<p>這時候你又必須使用 <code>chown</code> 來更改檔案的權限，一次又一次，有夠煩。</p>
<hr>
<p>又或是在 Docker 容器中使用 sudo 啟動一個需要與終端交互的應用程序，這些應用可能無法正確地檢測到終端（TTY），因為 sudo 在創建新會話時可能不會適當地處理終端的所有權和控制。</p>
<p>結果，這些需要與終端交互的應用可能無法正常運行，或者在試圖使用它們時遇到輸入/輸出錯誤。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="信號轉發">信號轉發<a class="hash-link" aria-label="信號轉發的直接連結" title="信號轉發的直接連結" href="https://docsaid.org/blog/gosu-usage#%E4%BF%A1%E8%99%9F%E8%BD%89%E7%99%BC">​</a></h3>
<p>假設你有一個容器，其中運行著 Web 伺服器，例如 Apache 或 Nginx。</p>
<p>通常，你可能會使用命令列工具來管理這個容器，包括啟動和停止容器。在容器內部，如果你使用 sudo 來啟動 Web 伺服器，那麼 sudo 就會建立一個新的進程來運行 Web 伺服器。</p>
<p>問題出現在當你想要停止或重新啟動容器時。容器管理系統會向容器發送訊號（如 SIGTERM），以通知容器內的程序準備停止。然而，如果 Web 伺服器是透過 sudo 啟動的，那麼這個訊號可能只會被傳送到 sudo 進程，而不是實際運行 Web 伺服器的進程。這意味著 Web 伺服器可能不會收到停止訊號，因此無法進行適當的清理和安全關閉。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>sudo 的設計初衷是提高安全性，允許一般使用者以其他使用者（通常是 root 使用者）的身分執行指令。在這個過程中，sudo 會啟動一個新的會話來執行指令。這個行為在傳統的作業系統環境中通常沒有問題，但在容器這樣的輕量級虛擬化環境中，它可能導致訊號傳遞問題，因為 sudo 創建的新會話與容器管理系統發送訊號的方式可能不相容 。</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="什麼是-gosu">什麼是 gosu？<a class="hash-link" aria-label="什麼是 gosu？的直接連結" title="什麼是 gosu？的直接連結" href="https://docsaid.org/blog/gosu-usage#%E4%BB%80%E9%BA%BC%E6%98%AF-gosu">​</a></h2>
<ul>
<li><a href="https://github.com/tianon/gosu" target="_blank" rel="noopener noreferrer"><strong>gosu GitHub repository</strong></a></li>
</ul>
<p>gosu 是一個專門為了容器設計的工具，它的目的是讓在容器內部執行命令變得更簡單和安全。當你需要以不同的用戶身份（比如從管理員變成普通用戶）來運行某個程序時，gosu 就能派上用場。它核心工作原理直接借鑒了 <code>Docker/libcontainer</code> 啟動容器內應用程式的方式（實際上，它直接使用了 <code>libcontainer</code> 代碼庫中的 <code>/etc/passwd</code> 處理代碼）。</p>
<p>如果你對它的工作原理不感興趣，那簡單來說，gosu 就像是一個幫手，當你告訴它「請以這個用戶的身份執行這個命令」時，它就會幫你做到，而且做完之後就會退出，不會留下任何痕迹。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="實際應用場景">實際應用場景<a class="hash-link" aria-label="實際應用場景的直接連結" title="實際應用場景的直接連結" href="https://docsaid.org/blog/gosu-usage#%E5%AF%A6%E9%9A%9B%E6%87%89%E7%94%A8%E5%A0%B4%E6%99%AF">​</a></h3>
<p>在 Docker 容器的 ENTRYPOINT 腳本中使用 gosu 是一個非常典型的應用場景，尤其當我們需要從 root 用戶降級到非特權用戶來執行某些操作時。這種做法對於保護容器運行環境的安全至關重要，因為它能有效減少潛在的安全風險。</p>
<p>安裝 gosu 非常簡單，通常只需要在 Dockerfile 中添加幾行指令即可完成安裝和配置。下面的範例展示了如何在 Dockerfile 中安裝 gosu，並通過一個入口點腳本來動態創建用戶和用戶組，然後使用 gosu 以指定的用戶身份執行命令。</p>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Dockerfile</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 基於一個已有的基礎鏡像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM some_base_image:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安裝gosu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; apt-get install -y gosu &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 準備入口點腳本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY entrypoint.sh /entrypoint.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN chmod +x /entrypoint.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT ["/entrypoint.sh"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD ["default_command"]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>entrypoint.sh</code> 腳本的範例內容如下，它根據環境變量 USER_ID 和 GROUP_ID 動態創建用戶，然後用 gosu 執行命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">entrypoint.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 檢查是否設置了USER_ID和GROUP_ID環境變量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ ! -z "$USER_ID" ] &amp;&amp; [ ! -z "$GROUP_ID" ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 創建用戶組和用戶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupadd -g "$GROUP_ID" usergroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    useradd -u "$USER_ID" -g usergroup -m user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 使用gosu執行命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec gosu user "$@"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec "$@"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果需要實際的範例，可以參考：<a href="https://github.com/DocsaidLab/DocClassifier/blob/main/docker/Dockerfile" target="_blank" rel="noopener noreferrer"><strong>DocClassifier training docker</strong></a></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安全性考量">安全性考量<a class="hash-link" aria-label="安全性考量的直接連結" title="安全性考量的直接連結" href="https://docsaid.org/blog/gosu-usage#%E5%AE%89%E5%85%A8%E6%80%A7%E8%80%83%E9%87%8F">​</a></h3>
<p>儘管 gosu 的主要用途是在容器啟動時從 <code>root</code> 用戶切換到非特權用戶，但其開發者也強調了在特定情境下使用 gosu 可能存在的安全風險。</p>
<p>這是因為任何允許用戶切換的工具，若被不當使用，都可能打開安全漏洞的大門。因此，開發和運維團隊需要對 gosu 的使用場景有充分的了解，並確保其僅在安全的環境中使用。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="gosu" term="gosu"/>
        <category label="sudo" term="sudo"/>
        <category label="container" term="container"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 pyenv 管理 Python 版本]]></title>
        <id>https://docsaid.org/blog/pyenv-installation</id>
        <link href="https://docsaid.org/blog/pyenv-installation"/>
        <updated>2023-10-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[記錄安裝 pyenv 的安裝與使用方式。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/1010-4cadfd563eec7e0fe6dd328308d252bf.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>早些年使用 Python 的時候大多使用 Conda 來管理。現在則是常用 pyenv 。</p>
<p>我們就在這篇文章中來記錄安裝 pyenv 的安裝與使用方式。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="前置條件">前置條件<a class="hash-link" aria-label="前置條件的直接連結" title="前置條件的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E5%89%8D%E7%BD%AE%E6%A2%9D%E4%BB%B6">​</a></h2>
<p>在安裝 <code>pyenv</code> 之前，你需要有 <code>Git</code> 安裝在你的系統上。</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_BuS1"><p>在 pyenv 套件中有提供 <a href="https://github.com/pyenv/pyenv/wiki/Common-build-problems" target="_blank" rel="noopener noreferrer"><strong>安裝問題指南</strong></a> 。</p><p>如果你在安裝過程中遇到問題，可以參考這個頁面。</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝-pyenv">安裝 <code>pyenv</code><a class="hash-link" aria-label="安裝-pyenv的直接連結" title="安裝-pyenv的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E5%AE%89%E8%A3%9D-pyenv">​</a></h2>
<ol>
<li>
<p><strong>執行安裝指令</strong>：</p>
<p>你可以通過以下指令快速安裝 <code>pyenv</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl https://pyenv.run | bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這條指令實際上是從 GitHub 上的 <code>pyenv-installer</code> 存儲庫獲取安裝腳本並執行。</p>
</li>
<li>
<p><strong>設定你的 Shell 環境</strong>：</p>
<p>安裝完畢後，根據 <a href="https://github.com/pyenv/pyenv#set-up-your-shell-environment-for-pyenv" target="_blank" rel="noopener noreferrer"><strong>設定指南</strong></a> 配置你的 shell 環境，以確保 <code>pyenv</code> 能夠正確工作。</p>
<p>如果你是使用 <code>bash</code>，則需要將以下代碼添加到你的 <code>.bashrc</code> 文件中：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PATH="$HOME/.pyenv/bin:$PATH"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eval "$(pyenv init --path)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eval "$(pyenv virtualenv-init -)"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果你使用的是 <code>zsh</code>，則需要將上述代碼添加到你的 <code>.zshrc</code> 文件中。</p>
</li>
<li>
<p><strong>重啟你的 Shell</strong>：</p>
<p>當你完成上述步驟後，請重新載入新的配置。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exec $SHELL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用-pyenv">使用 <code>pyenv</code><a class="hash-link" aria-label="使用-pyenv的直接連結" title="使用-pyenv的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E4%BD%BF%E7%94%A8-pyenv">​</a></h2>
<p>安裝和設定完成後，你可以開始使用 <code>pyenv</code> 管理多個 Python 版本：</p>
<ul>
<li>
<p><strong>安裝新的 Python 版本</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv install 3.10.14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>切換全局 Python 版本</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv global 3.10.14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>在特定目錄使用特定版本</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv local 3.8.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="虛擬環境">虛擬環境<a class="hash-link" aria-label="虛擬環境的直接�連結" title="虛擬環境的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83">​</a></h2>
<p>在 Python 開發中，虛擬環境是一個非常重要的概念。</p>
<p>它可以幫助我們在不同的專案中使用不同的 Python 版本和依賴庫。</p>
<p>至少當你不小心弄壞了 Python 環境時，你可以直接刪除虛擬環境，重新來過。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>我們一律建議在開發 Python 專案時使用虛擬環境。</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝">安裝<a class="hash-link" aria-label="安裝的直接連結" title="安裝的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E5%AE%89%E8%A3%9D">​</a></h3>
<p><code>pyenv</code> 還提供了一個 <code>pyenv-virtualenv</code> 插件，可以讓你更方便地管理 Python 虛擬環境。</p>
<p>在早期這個功能需要單獨安裝，現在已經整合到 <code>pyenv</code> 中，我們可以直接用：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv virtualenv 3.10.14 your-env-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中，<code>3.10.14</code> 是你想要使用的 Python 版本，你在上一個步驟已經完成安裝，<code>your-env-name</code> 是虛擬環境的名稱。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用">使用<a class="hash-link" aria-label="使用的直接連結" title="使用的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E4%BD%BF%E7%94%A8">​</a></h3>
<p>激活虛擬環境，請運行：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv activate your-env-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="移除">移除<a class="hash-link" aria-label="移除的直接連結" title="移除的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E7%A7%BB%E9%99%A4">​</a></h3>
<p>最後，當你不需要虛擬環境，可以運行以下命令刪除：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv virtualenv-delete your-env-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="更新-pyenv">更新 <code>pyenv</code><a class="hash-link" aria-label="更新-pyenv的直接連結" title="更新-pyenv的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E6%9B%B4%E6%96%B0-pyenv">​</a></h2>
<p>如果需要更新 <code>pyenv</code> 到最新版本，只需運行：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pyenv update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="卸載-pyenv">卸載 <code>pyenv</code><a class="hash-link" aria-label="卸載-pyenv的直接連結" title="卸載-pyenv的直接連結" href="https://docsaid.org/blog/pyenv-installation#%E5%8D%B8%E8%BC%89-pyenv">​</a></h2>
<p>如果你決定不再使用 <code>pyenv</code>，可以按照以下步驟卸載：</p>
<ol>
<li>
<p><strong>移除 <code>pyenv</code> 安裝目錄</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -fr ~/.pyenv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>清理你的 <code>.bashrc</code></strong>：
移除或註釋掉相關的 <code>pyenv</code> 配置行，然後重啟你的 shell：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exec $SHELL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="python" term="python"/>
        <category label="pyenv" term="pyenv"/>
        <category label="virtualenv" term="virtualenv"/>
        <category label="usage" term="usage"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[記錄與排查模型訓練環境問題]]></title>
        <id>https://docsaid.org/blog/python-env-info-collector</id>
        <link href="https://docsaid.org/blog/python-env-info-collector"/>
        <updated>2023-09-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[自己手刻的紀錄工具，分享給大家使用。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0922-2a12ae1ddf60abe64721c0fc76eac05e.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>當模型 train 壞了，我們總是會想知道是什麼原因導致的，這時候我們需要檢查訓練主機的環境資訊，例如：Python 版本、PyTorch 版本、CUDA 版本、GPU 資訊、CPU 資訊、RAM 資訊、磁碟資訊、IP 地址等等。</p>
<p>我們在本文中分享一個自己手刻的 Python 小工具，可以快速查看這些資訊，雖然說不是包山包海，但基本的問題排查應該足夠用了。</p>
<p>一般來說，我們會在訓練啟動的環節，將環境資訊紀錄到訓練主機的日誌裡面。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="安裝">安裝<a class="hash-link" aria-label="安裝的直接連結" title="安裝的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E5%AE%89%E8%A3%9D">​</a></h2>
<p>我們先安裝必要套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install psutil requests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接著你可以在本文的最後取得完整的程式碼，並且將它放在你的專案裡面。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用-get_package_versions">使用 <code>get_package_versions</code><a class="hash-link" aria-label="使用-get_package_versions的直接連結" title="使用-get_package_versions的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E4%BD%BF%E7%94%A8-get_package_versions">​</a></h2>
<p>我們假設你有安裝 docsaidkit，並且已經在專案裡面，則可以透過以下指令測試：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> docsaidkit </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_package_versions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_package_versions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>執行後得到結果：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "PyTorch Version": "2.1.1+cu121",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "PyTorch Lightning Version": "2.1.2",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "TensorFlow Error": "No module named 'tensorflow'",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Keras Error": "No module named 'keras'",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "NumPy Version": "1.24.4",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Pandas Version": "2.0.3",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Scikit-learn Version": "1.3.2",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "OpenCV Version": "4.8.1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>PyTorch Version: PyTorch 版本</li>
<li>PyTorch Lightning Version: PyTorch Lightning 版本</li>
<li>TensorFlow Error: TensorFlow 版本</li>
<li>Keras Error: Keras 版本</li>
<li>NumPy Version: NumPy 版本</li>
<li>Pandas Version: Pandas 版本</li>
<li>Scikit-learn Version: Scikit-learn 版本</li>
<li>OpenCV Version: OpenCV 版本</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用-get_gpu_cuda_versions">使用 <code>get_gpu_cuda_versions</code><a class="hash-link" aria-label="使用-get_gpu_cuda_versions的直接連結" title="使用-get_gpu_cuda_versions的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E4%BD%BF%E7%94%A8-get_gpu_cuda_versions">​</a></h2>
<p>測試程式：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> docsaidkit </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_gpu_cuda_versions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_gpu_cuda_versions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>執行後得到結果：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "CUDA Version": "12.1",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "NVIDIA Driver Version": "535.129.03"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>CUDA Version: CUDA 版本</li>
<li>NVIDIA Driver Version: NVIDIA 驅動版本</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="使用-get_system_info">使用 <code>get_system_info</code><a class="hash-link" aria-label="使用-get_system_info的直接連結" title="使用-get_system_info的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E4%BD%BF%E7%94%A8-get_system_info">​</a></h2>
<p>測試程式：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> docsaidkit </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> get_system_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_system_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>執行後得到結果：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "OS Version": "Linux-6.2.0-37-generic-x86_64-with-glibc2.34",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "CPU Model": "13th Gen Intel(R) Core(TM) i9-13900K",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Physical CPU Cores": 24,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Logical CPU Cores (incl. hyper-threading)": 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Total RAM (GB)": 125.56,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Available RAM (GB)": 110.9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Disk Total (GB)": 1832.21,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Disk Used (GB)": 188.94,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "Disk Free (GB)": 1550.12,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "GPU Info": "NVIDIA GeForce RTX 4090",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "IPV4 Address": ["192.168.---.---"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "IPV4 Address (External)": "---.---.---.---",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "MAC Address": ["--.--.--.--.--.--"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>OS Version: 操作系統版本</li>
<li>CPU Model: CPU 型號</li>
<li>Physical CPU Cores: 物理 CPU 核心數</li>
<li>Logical CPU Cores (incl. hyper-threading): 邏輯 CPU 核心數 (包括超執行緒)</li>
<li>Total RAM (GB): 總 RAM 容量 (GB)</li>
<li>Available RAM (GB): 可用 RAM 容量 (GB)</li>
<li>Disk Total (GB): 磁碟總容量 (GB)</li>
<li>Disk Used (GB): 已使用的磁碟容量 (GB)</li>
<li>Disk Free (GB): 空閒磁碟容量 (GB)</li>
<li>GPU Info: GPU 資訊</li>
<li>IPV4 Address: 內部 IPV4 地址</li>
<li>IPV4 Address (External): 外部 IPV4 地址</li>
<li>MAC Address: MAC 地址</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="注意事項與替代方案">注意事項與替代方案<a class="hash-link" aria-label="注意事項與替代方案的直接連結" title="注意事項與替代方案的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85%E8%88%87%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88">​</a></h2>
<p>由於我們是在 Ubuntu 上撰寫本函數，因此在其他作業系統上可能會有劇情之外的發展。</p>
<p>以下幾個可能需要注意的要點：</p>
<ul>
<li>因操作系統的限制，某些函數可能無法在所有平台上運行。例如：<code>get_cpu_info</code> 在 Windows 上不會顯示完整的 CPU 型號。在這種情況下，你可以考慮使用其他工具或手動獲取此資訊。</li>
<li>如果你在 Windows 環境中，無法直接使用 <code>nvidia-smi</code> 來獲取 GPU 資訊，請確保已安裝 NVIDIA 驅動和相關的工具，並在命令提示符窗口中執行它。</li>
<li>外部 IP 地址是從 <code>https://httpbin.org/ip</code> 獲取的，所以必須確保網路連線是活躍的。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="程式碼">程式碼<a class="hash-link" aria-label="程式碼的直接連結" title="程式碼的直接連結" href="https://docsaid.org/blog/python-env-info-collector#%E7%A8%8B%E5%BC%8F%E7%A2%BC">​</a></h2>
<p>我們期待這份程式碼可以幫助你快速檢視訓練環境，你可以將此資訊輸出後與模型的訓練日誌一起保存，以確保訓練的可追溯性和可重現性。</p>
<ul>
<li><a href="https://github.com/DocsaidLab/DocsaidKit/blob/main/docsaidkit/utils/system_info.py" target="_blank" rel="noopener noreferrer">system_info.py</a></li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> platform</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> socket</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> subprocess</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> psutil</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> requests</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_package_versions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Get versions of commonly used packages in deep learning and data science.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">        dict: Dictionary containing versions of installed packages.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    versions_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># PyTorch</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"PyTorch Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"PyTorch Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># PyTorch Lightning</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pytorch_lightning </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pl</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"PyTorch Lightning Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"PyTorch Lightning Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># TensorFlow</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"TensorFlow Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"TensorFlow Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Keras</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> keras</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Keras Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Keras Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># NumPy</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"NumPy Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"NumPy Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Pandas</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Pandas Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Pandas Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Scikit-learn</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sklearn</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Scikit-learn Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sklearn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Scikit-learn Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># OpenCV</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cv2</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"OpenCV Version"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cv2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__version__</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        versions_info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"OpenCV Error"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ... and so on for any other packages you"re interested in</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> versions_info</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_gpu_cuda_versions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Get GPU and CUDA versions using popular Python libraries.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">        dict: Dictionary containing CUDA and GPU driver versions.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    cuda_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Attempt to retrieve CUDA version using PyTorch</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        cuda_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ImportError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If not retrieved via PyTorch, try using TensorFlow</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> cuda_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            cuda_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">COMPILER_VERSION</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ImportError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If still not retrieved, try using CuPy</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> cuda_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> cupy</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            cuda_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cupy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">runtimeGetVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> ImportError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            cuda_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Error: None of PyTorch, TensorFlow, or CuPy are installed."</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Try to get Nvidia driver version using nvidia-smi command</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        smi_output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">check_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"nvidia-smi"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"--query-gpu=driver_version"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"--format=csv,noheader,nounits"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"utf-8"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        nvidia_driver_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> smi_output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\n"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        nvidia_driver_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"Error getting NVIDIA driver version: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"CUDA Version"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cuda_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"NVIDIA Driver Version"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nvidia_driver_version</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_cpu_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Retrieve the CPU model name based on the platform.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">        str: CPU model name or "N/A" if not found.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Windows"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">processor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Darwin"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># For macOS</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sysctl -n machdep.cpu.brand_string"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">check_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shell</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Linux"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># For Linux</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"cat /proc/cpuinfo | grep "</span><span class="token plain">model name</span><span class="token string" style="color:#e3116c">" | uniq"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">check_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shell</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">":"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"N/A"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_external_ip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"https://httpbin.org/ip"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"origin"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"Error obtaining IP: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_system_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Fetch system information like OS version, CPU info, RAM, Disk usage, etc.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    Returns:</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">        dict: Dictionary containing system information.</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"OS Version"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">platform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"CPU Model"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> get_cpu_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Physical CPU Cores"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cpu_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">logical</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Logical CPU Cores (incl. hyper-threading)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cpu_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">logical</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Total RAM (GB)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtual_memory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">total </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Available RAM (GB)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">virtual_memory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">available </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Disk Total (GB)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">disk_usage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">total </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Disk Used (GB)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">disk_usage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">used </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"Disk Free (GB)"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">disk_usage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">free </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Try to fetch GPU information using nvidia-smi command</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        gpu_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subprocess</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">check_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"nvidia-smi"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--query-gpu=name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--format=csv,noheader,nounits"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"utf-8"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"GPU Info"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> gpu_info</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"GPU Info"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"N/A or Error"</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get network information</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    addrs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">net_if_addrs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"IPV4 Address"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> addr </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> addrs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"enp5s0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">family </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AF_INET</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"IPV4 Address (External)"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_external_ip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Determine platform and choose correct address family for MAC</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">hasattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"AF_LINK"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        AF_LINK </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AF_LINK</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> </span><span class="token builtin">hasattr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">psutil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"AF_LINK"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        AF_LINK </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> psutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AF_LINK</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> Exception</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"Cannot determine the correct AF_LINK value for this platform."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    info</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"MAC Address"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">address </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> addr </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> addrs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"enp5s0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">family </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> AF_LINK</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> info</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="python" term="python"/>
        <category label="training" term="training"/>
        <category label="env" term="env"/>
        <category label="info" term="info"/>
        <category label="log" term="log"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[搭建 PyPiServer 記錄]]></title>
        <id>https://docsaid.org/blog/ubuntu-docker-pypiserver</id>
        <link href="https://docsaid.org/blog/ubuntu-docker-pypiserver"/>
        <updated>2023-09-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[記錄 Ubuntu 上搭建 PyPiServer 的過程。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0913-a1c6cbea3602d12e990e10be50d5145d.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>隨著 Python 社群的持續發展，許多開發者和團隊選擇建立自己的私有 Python 包索引伺服器，來儲存和管理自家的 Python 套件。這不僅提供了更好的版本控制，也確保了軟體包的安全性。</p>
<p>在本文中，我們用 Docker 來建立一個 PyPi Server，並且在 Ubuntu 上運行。</p>
<p>我們假設你已經在 Ubuntu 上安裝了 Docker，並且已經熟悉了 Docker 的基本操作。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-拉取-pypiserver-的-docker-映像">1. 拉取 pypiserver 的 Docker 映像<a class="hash-link" aria-label="1. 拉取 pypiserver 的 Docker 映像的直接連結" title="1. 拉取 pypiserver 的 Docker 映像的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#1-%E6%8B%89%E5%8F%96-pypiserver-%E7%9A%84-docker-%E6%98%A0%E5%83%8F">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull pypiserver/pypiserver:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-創建一個目錄來存儲-python-包">2. 創建一個目錄來存儲 Python 包<a class="hash-link" aria-label="2. 創建一個目錄來存儲 Python 包的直接連結" title="2. 創建一個目錄來存儲 Python 包的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#2-%E5%89%B5%E5%BB%BA%E4%B8%80%E5%80%8B%E7%9B%AE%E9%8C%84%E4%BE%86%E5%AD%98%E5%84%B2-python-%E5%8C%85">​</a></h2>
<p>不囉唆，我們直接在家目錄下創建一個目錄來存儲 Python 包。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/packages</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-設定-htpasswd">3. 設定 htpasswd<a class="hash-link" aria-label="3. 設定 htpasswd的直接連結" title="3. 設定 htpasswd的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#3-%E8%A8%AD%E5%AE%9A-htpasswd">​</a></h2>
<p>htpasswd 是一種用於存儲用戶名和密碼（經常用於基本 HTTP 身份驗證）的文件格式。</p>
<p>pypiserver 會使用此文件來驗證試圖上傳或下載套件的用戶。這是一種簡單但有效的方式，可以增強 pypiserver 的安全性。</p>
<p>要創建一個 <code>.htpasswd</code> 文件，你需要 <code>apache2-utils</code> 套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install apache2-utils</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然後，使用以下命令創建一個新的 .htpasswd 文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">htpasswd -c ~/.htpasswd [username]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>它會提示你輸入 <code>username</code> 的密碼。輸入密碼後，<code>.htpasswd</code> 文件會在你的家目錄下創建。</p>
<p>這時，你就可以使用上面提到的 <code>docker run</code> 命令來運行 <code>pypiserver</code>，並且使用你剛剛建立的 <code>.htpasswd</code> 文件進行身份驗證。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-將-pypiserver-掛載為背景服務">4. 將 pypiserver 掛載為背景服務<a class="hash-link" aria-label="4. 將 pypiserver 掛載為背景服務的直接連結" title="4. 將 pypiserver 掛載為背景服務的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#4-%E5%B0%87-pypiserver-%E6%8E%9B%E8%BC%89%E7%82%BA%E8%83%8C%E6%99%AF%E6%9C%8D%E5%8B%99">​</a></h2>
<p>要將 Docker 容器作為背景服務運行，我們可以使用 Docker Compose 和 Systemd。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="41-安裝-docker-compose">4.1 安裝 Docker Compose<a class="hash-link" aria-label="4.1 安裝 Docker Compose的直接連結" title="4.1 安裝 Docker Compose的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#41-%E5%AE%89%E8%A3%9D-docker-compose">​</a></h3>
<p>如果你還沒有安裝 Docker Compose，首先進行安裝，請參考：</p>
<ul>
<li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer"><strong>安裝 Docker Compose 的官方文件</strong></a></li>
</ul>
<p>要注意的是 Docker Compose 最近有較大規模的更新，很多使用方式跟之前不一樣，最明顯的就是原本使用 <code>docker-compose</code> 的指令，現在都改成 <code>docker compose</code> 了。</p>
<p>我們根據官方文件，把安裝內容寫在下面：</p>
<p>安裝最新版本的 Docker Compose：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install docker-compose-plugin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>檢查 Docker Compose 是否正確安裝：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="42-創建文件">4.2 創建文件<a class="hash-link" aria-label="4.2 創建文件的直接連結" title="4.2 創建文件的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#42-%E5%89%B5%E5%BB%BA%E6%96%87%E4%BB%B6">​</a></h3>
<p>找個地方創建 <code>docker-compose.yml</code>，並填入以下內容：</p>
<p>你也可以參考 <code>pypiserver</code> 提供的範本：<a href="https://github.com/pypiserver/pypiserver/blob/master/docker-compose.yml" target="_blank" rel="noopener noreferrer"><strong>docker-compose.yml</strong></a></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pypiserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pypiserver/pypiserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">你的使用者名稱</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/data/auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">你的使用者名稱</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/packages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/data/packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> run </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">P /data/auth/.htpasswd </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a update</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">download</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">list /data/packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8080:8080"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>請將上述的 [你的使用者名稱] 替換為你的實際使用者名稱。</li>
<li>你可以在這裡修改外部 port 映射值，例如改成：”18080:8080″。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="43-創建-systemd-服務">4.3 創建 Systemd 服務<a class="hash-link" aria-label="4.3 創建 Systemd 服務的直接連結" title="4.3 創建 Systemd 服務的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#43-%E5%89%B5%E5%BB%BA-systemd-%E6%9C%8D%E5%8B%99">​</a></h3>
<p>建立一個設定檔案：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /etc/systemd/system/pypiserver.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>添加以下內容：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=PypiServer Docker Compose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/path/to/your/docker-compose/directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/bin/docker compose up --remove-orphans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStop=/usr/bin/docker compose down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>請確保將 <code>/path/to/your/docker-compose/directory</code> 替換為 <code>docker-compose.yml</code> 文件的實際路徑，寫到路徑就可以，不用檔案名稱。</li>
<li>請確保你的 Docker 路徑正確，你可以使用 <code>which docker</code> 來確認。</li>
<li>我們基於新版的 <code>docker compose</code> 指令，而不是用 <code>docker-compose</code>。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="44-啟動-pypiserver-服務">4.4 啟動 pypiserver 服務<a class="hash-link" aria-label="4.4 啟動 pypiserver 服務的直接連結" title="4.4 啟動 pypiserver 服務的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#44-%E5%95%9F%E5%8B%95-pypiserver-%E6%9C%8D%E5%8B%99">​</a></h3>
<p>告知 systemd 重新讀取新的服務設定：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>啟動服務：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start pypiserver.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable pypiserver.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣一來，<code>pypiserver</code> 就會作為一個 <code>systemd</code> 服務運行，並且每次主機啟動時它都會自動啟動。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-查看狀態">5. 查看狀態<a class="hash-link" aria-label="5. 查看狀態的直接連結" title="5. 查看狀態的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#5-%E6%9F%A5%E7%9C%8B%E7%8B%80%E6%85%8B">​</a></h2>
<p>如果你想查看服務的當前狀態，你可以使用：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status pypiserver.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這將會顯示 <code>pypiserver</code> 服務的當前狀態，包括是否正在運行，以及最近的日誌輸出。</p>
<p><img decoding="async" loading="lazy" alt="pypiserver status" src="https://docsaid.org/assets/images/pypiserver-3a82a5ef370f8387611a4c2322e85a8a.jpg" width="2048" height="707" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-使用-pypiserver">6. 使用 pypiserver<a class="hash-link" aria-label="6. 使用 pypiserver的直接連結" title="6. 使用 pypiserver的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#6-%E4%BD%BF%E7%94%A8-pypiserver">​</a></h2>
<p>現在，你可以使用 <code>pip</code> 來安裝和上傳套件了。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="61-上傳套件">6.1 上傳套件<a class="hash-link" aria-label="6.1 上傳套件的直接連結" title="6.1 上傳套件的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#61-%E4%B8%8A%E5%82%B3%E5%A5%97%E4%BB%B6">​</a></h3>
<p>首先，你需要有一個已經打包的 Python 軟體包（通常是 .whl 或 .tar.gz 格式）。假設你已有一個名為 <code>example_package-0.1-py3-none-any.whl</code> 的包。</p>
<p>要上傳軟體包到你的 <code>pypiserver</code>，使用 <code>twine</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install twine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">twine upload --repository-url http://localhost:8080/ example_package-0.1-py3-none-any.whl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>你需要確保 localhost:8080 是你的 pypiserver 服務的地址和端口。</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="62-安裝套件">6.2 安裝套件<a class="hash-link" aria-label="6.2 安裝套件的直接連結" title="6.2 安裝套件的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#62-%E5%AE%89%E8%A3%9D%E5%A5%97%E4%BB%B6">​</a></h3>
<p>要安裝套件，你需要使用 <code>pip</code>，並且指定你的 <code>pypiserver</code> 服務的地址和端口：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install --index-url http://localhost:8080/ example_package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="63-使用基本認證">6.3 使用基本認證<a class="hash-link" aria-label="6.3 使用基本認證的直接連結" title="6.3 使用基本認證的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#63-%E4%BD%BF%E7%94%A8%E5%9F%BA%E6%9C%AC%E8%AA%8D%E8%AD%89">​</a></h3>
<p>如果你的 pypiserver 設置了基本認證（可能會為了安全原因這麼做），你在上傳或下載時需要提供認證資訊：</p>
<ul>
<li>
<p>上傳套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">twine upload --repository-url http://localhost:8080/ --username [username] --password [password] example_package-0.1-py3-none-any.whl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>安裝套件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install --index-url http://[username]:[password]@localhost:8080/ example_package</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="64-為長期使用設定-pipconf">6.4 為長期使用設定 pip.conf<a class="hash-link" aria-label="6.4 為長期使用設定 pip.conf的直接連結" title="6.4 為長期使用設定 pip.conf的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#64-%E7%82%BA%E9%95%B7%E6%9C%9F%E4%BD%BF%E7%94%A8%E8%A8%AD%E5%AE%9A-pipconf">​</a></h3>
<p>如果你經常從此伺服器安裝套件，你可能不想每次都在 <code>pip install</code> 時指定 <code>--index-url</code>。此時，你可以在 <code>pip.conf</code> 中設定預設的包索引源。</p>
<p>首先，找到或創建 <code>pip.conf</code> 文件，以下是按優先級順序可能存在於你機器上的文件：</p>
<ul>
<li>
<p>優先級 1: 站點級別的配置文件：</p>
<ul>
<li><code>/home/[你的使用者名稱]/.pyenv/versions/3.8.18/envs/main/pip.conf</code></li>
</ul>
</li>
<li>
<p>優先級 2: 使用者級別的配置文件：</p>
<ul>
<li><code>/home/[你的使用者名稱]/.pip/pip.conf</code></li>
<li><code>/home/[你的使用者名稱]/.config/pip/pip.conf</code></li>
</ul>
</li>
<li>
<p>優先級 3: 全局級別的配置文件：</p>
<ul>
<li><code>/etc/pip.conf</code></li>
<li><code>/etc/xdg/pip/pip.conf</code></li>
</ul>
</li>
</ul>
<p>所以記得要釐清一下，當前的 python 環境會使用哪一份檔案，並找到該檔案後加入以下內容：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[global]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index-url = http://[提供服務的主機IP位置]:8080/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trusted-host = [提供服務的主機IP位置]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再次，請確保替換 <code>[提供服務的主機IP位置]:8080</code> 為你 <code>pypiserver</code> 的正確地址和端口。</p>
<p>此後，當你使用 <code>pip install [package_name]</code>，<code>pip</code> 會自動使用設定在 <code>pip.conf</code> 的伺服器地址作為套件源。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7-結語">7. 結語<a class="hash-link" aria-label="7. 結語的直接連結" title="7. 結語的直接連結" href="https://docsaid.org/blog/ubuntu-docker-pypiserver#7-%E7%B5%90%E8%AA%9E">​</a></h2>
<p>現在，你已經成功地設立了自己的私有 PyPI 伺服器，並學會了如何上傳和下載套件。</p>
<p>透過 <code>pypiserver</code>，你不僅能夠更有效地管理自己的 Python 套件，同時也能確保你的套件在一個受保護的環境中。希望本文能夠對你帶來實際的幫助。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="docker" term="docker"/>
        <category label="pypiserver" term="pypiserver"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[在 Ubuntu 上設定 SSH 伺服器]]></title>
        <id>https://docsaid.org/blog/ubuntu-install-ssh</id>
        <link href="https://docsaid.org/blog/ubuntu-install-ssh"/>
        <updated>2023-09-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[伺服器的設定與無密碼登入教學。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0912-1f795861136865cb368c63ccab3340c5.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>SSH（安全殼層）是一種網絡協議，允許用戶安全地訪問和管理遠程服務器。</p>
<p>我們這次要來設定無密碼登入。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-安裝-openssh-伺服器">1. 安裝 OpenSSH 伺服器<a class="hash-link" aria-label="1. 安裝 OpenSSH 伺服器的直接連結" title="1. 安裝 OpenSSH 伺服器的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#1-%E5%AE%89%E8%A3%9D-openssh-%E4%BC%BA%E6%9C%8D%E5%99%A8">​</a></h2>
<p>打開終端機。</p>
<p>輸入以下命令來安裝 OpenSSH 伺服器：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install openssh-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-檢查-ssh-伺服器狀態">2. 檢查 SSH 伺服器狀態<a class="hash-link" aria-label="2. 檢查 SSH 伺服器狀態的直接連結" title="2. 檢查 SSH 伺服器狀態的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#2-%E6%AA%A2%E6%9F%A5-ssh-%E4%BC%BA%E6%9C%8D%E5%99%A8%E7%8B%80%E6%85%8B">​</a></h2>
<p>使用以下命令檢查 SSH 伺服器的狀態：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果你看到 「Active: active (running)」，那麼 SSH 伺服器已經成功啟動。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-ssh-無密碼登入設定">3. SSH 無密碼登入設定：<a class="hash-link" aria-label="3. SSH 無密碼登入設定：的直接連結" title="3. SSH 無密碼登入設定：的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#3-ssh-%E7%84%A1%E5%AF%86%E7%A2%BC%E7%99%BB%E5%85%A5%E8%A8%AD%E5%AE%9A">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-在客戶端生成-ssh-金鑰對">3.1 在客戶端生成 SSH 金鑰對<a class="hash-link" aria-label="3.1 在客戶端生成 SSH 金鑰對的直接連結" title="3.1 在客戶端生成 SSH 金鑰對的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#31-%E5%9C%A8%E5%AE%A2%E6%88%B6%E7%AB%AF%E7%94%9F%E6%88%90-ssh-%E9%87%91%E9%91%B0%E5%B0%8D">​</a></h3>
<p>打開終端機。</p>
<p>輸入以下命令以生成金鑰對：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>按照提示操作。通常預設的設定就足夠了。在詢問密碼的部分可以直接按 Enter 以建立一個無密碼的金鑰對。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-把公開金鑰複製到伺服器">3.2 把公開金鑰複製到伺服器<a class="hash-link" aria-label="3.2 把公開金鑰複製到伺服器的直接連結" title="3.2 把公開金鑰複製到伺服器的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#32-%E6%8A%8A%E5%85%AC%E9%96%8B%E9%87%91%E9%91%B0%E8%A4%87%E8%A3%BD%E5%88%B0%E4%BC%BA%E6%9C%8D%E5%99%A8">​</a></h3>
<p>使用 ssh-copy-id 命令將公開金鑰複製到伺服器。替換 [username] 與 [server-ip] 為你的伺服器資料。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id [username]@[server-ip]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>例如：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id john@192.168.0.100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果伺服器更改了預設的 SSH 埠（如：2222），則使用 -p 參數：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -p 2222 john@192.168.0.100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此命令將會提示你輸入伺服器的密碼。</p>
<p>一旦驗證成功，你的公開金鑰就會被添加到伺服器上的 <code>~/.ssh/authorized_keys</code> 檔案中。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="33-測試無密碼登入">3.3 測試無密碼登入<a class="hash-link" aria-label="3.3 測試無密碼登入的直接連結" title="3.3 測試無密碼登入的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#33-%E6%B8%AC%E8%A9%A6%E7%84%A1%E5%AF%86%E7%A2%BC%E7%99%BB%E5%85%A5">​</a></h3>
<p>嘗試 SSH 至伺服器：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh [username]@[server-ip]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果一切設定正確，你將可以無需密碼登入伺服器。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="注意事項">注意事項<a class="hash-link" aria-label="注意事項的直接連結" title="注意事項的直接連結" href="https://docsaid.org/blog/ubuntu-install-ssh#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85">​</a></h2>
<p>使用 SSH 金鑰認證確實可以提高安全性和方便性，但請確保不要遺失私鑰。</p>
<p>建議定期更換或更新你的 SSH 金鑰。為了增加安全性，可以考慮禁止密碼認證方式。</p>
<p>這可以在伺服器的 <code>/etc/ssh/sshd_config</code> 中設定：</p>
<ul>
<li><code>PasswordAuthentication no</code>。</li>
</ul>
<p>完成上述步驟後，你將能夠使用 SSH 金鑰認證從客戶端無密碼登入伺服器。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="ubuntu" term="ubuntu"/>
        <category label="ssh" term="ssh"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[自動運行 GitHub Runner]]></title>
        <id>https://docsaid.org/blog/ubuntu-github-runner-systemd</id>
        <link href="https://docsaid.org/blog/ubuntu-github-runner-systemd"/>
        <updated>2023-09-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[用 Ubuntu Systemd 在背景執行並自動運行。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0910-c2468dc9e08d9233e1d0fc90aa5dd798.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>我們在使用 Github 協作的過程中，常會使用到私有主機來進行 CI/CD 的工作。這個部分在 Github 中有提供說明文件，告訴使用者該如何進行初步的安裝，依照步驟做完就可以配置成功。</p>
<p>然而，在不久之後，因為某些原因，主機被重新啟動，而原本的 Runner 卻沒有跟上。</p>
<p>這件事情就這樣被忘記，直到有人發現 CI/CD 沒有反應，才會被提醒應該把服務啟動。</p>
<p><strong>這樣的事情會一而再再而三的發生，不堪其擾！</strong></p>
<p>所以，我們需要自動執行！</p>
<ul>
<li>
<p>說明文件示意圖</p>
<p><img decoding="async" loading="lazy" alt="github_set_runner" src="https://docsaid.org/assets/images/github_set_runner-6ca68dc499f780fcc4c6e7d7461a2ffe.jpg" width="2048" height="1173" class="img_ev3q"></p>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="配置流程">配置流程<a class="hash-link" aria-label="配置流程的直接連結" title="配置流程的直接連結" href="https://docsaid.org/blog/ubuntu-github-runner-systemd#%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B">​</a></h2>
<p>要在主機開機後自動執行某個任務，通常可以使用 systemd 服務 (service) 來做。</p>
<ol>
<li>
<p><strong>建立一個新的 systemd 服務檔案：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /etc/systemd/system/actions-runner.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>貼上以下的內容到檔案中：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=GitHub Action Runner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=你的使用者名稱</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/home/你的使用者名稱/actions-runner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/home/你的使用者名稱/actions-runner/run.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>＊注意：<code>User</code> 與 <code>WorkingDirectory</code> 要改成你自己的使用者名稱。</p>
</li>
<li>
<p><strong>告知 systemd 重新讀取新的服務設定：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>啟用此服務，使其在開機時自動啟動：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable actions-runner.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>現在你可以手動開始此服務，或是重新開機來測試它：</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start actions-runner.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用這個方法，當你的主機開機時，actions-runner 會自動背景執行。</p>
<p>如果你想停止服務，可以使用以下指令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl stop actions-runner.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>＊注意：確保 <code>run.sh</code> 具有可執行的權限。</p>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="查看狀態">查看狀態<a class="hash-link" aria-label="查看狀態的直接連結" title="查看狀態的直接連結" href="https://docsaid.org/blog/ubuntu-github-runner-systemd#%E6%9F%A5%E7%9C%8B%E7%8B%80%E6%85%8B">​</a></h2>
<p>當你使用 systemd 來管理服務時，你無法直接「attach」之類的服務來看它的輸出，但你可以查看這個服務的日誌來了解它的工作狀態，要查看 actions-runner 服務的日誌，你可以使用以下命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo journalctl -u actions-runner.service -f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>解釋一下：</p>
<ul>
<li><code>-u actions-runner.service</code>：只查看名為 actions-runner 的服務的日誌。</li>
<li><code>-f</code>：這個參數讓 journalctl 持續追踪最新的日誌，所以你可以實時看到新的輸出。</li>
</ul>
<p>此外，如果你想查看服務的當前狀態，你可以使用：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status actions-runner.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這將會顯示 <code>actions-runner</code> 服務的當前狀態，包括是否正在運行，以及最近的日誌輸出：</p>
<p><img decoding="async" loading="lazy" alt="action-service" src="https://docsaid.org/assets/images/action-service-6b4de0ff1dc1dc29f3edb7aeb4d16fc8.jpg" width="2048" height="831" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="重新配置">重新配置<a class="hash-link" aria-label="重新配置的直接連結" title="重新配置的直接連結" href="https://docsaid.org/blog/ubuntu-github-runner-systemd#%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AE">​</a></h2>
<p>如果是原本的 Runner 不見了，通常會是在切換儲存庫的 Public 和 Private 的時候，或是原本 Runner 太久沒有調用，總之就是原本的 Runner 弄丟了，這時候就需要重新配置。</p>
<p>這時候，就到 actions-runner 資料夾底下，把 .runner 檔案刪掉，再重新跑一次：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./config.sh --url ... (改成新的 Token 配置)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其他流程都一樣，配置完之後，把服務重新啟動就好。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="ubuntu" term="ubuntu"/>
        <category label="github-action" term="github-action"/>
        <category label="runner" term="runner"/>
        <category label="systemd" term="systemd"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[登入 RTF8207W 路由器]]></title>
        <id>https://docsaid.org/blog/login-rtf8207w</id>
        <link href="https://docsaid.org/blog/login-rtf8207w"/>
        <updated>2023-09-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[偷偷登入 RTF8207W 路由器。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0904-d2a591661a07973b692c6589e9193644.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>這次我們想要登入中華電信的小烏龜，也就是 RTF8207W 數據機。</p>
<p>首先這個機器絕對不是長得像封面圖片這樣，這只是 GPT 的幻想而已。</p>
<p>言歸正傳，我們繼續：</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-登入管理介面">1. 登入管理介面。<a class="hash-link" aria-label="1. 登入管理介面。的直接連結" title="1. 登入管理介面。的直接連結" href="https://docsaid.org/blog/login-rtf8207w#1-%E7%99%BB%E5%85%A5%E7%AE%A1%E7%90%86%E4%BB%8B%E9%9D%A2">​</a></h3>
<p>通常可以透過網頁瀏覽器輸入 <code>192.168.1.1</code> 或其他 IP 地址進行訪問，具體地址可能依你的路由器型號而異。</p>
<p><img decoding="async" loading="lazy" alt="login-rtf8207w" src="https://docsaid.org/assets/images/RTF8207W-login-a999863d0bb563cefdf2c85580ff829d.jpg" width="1184" height="688" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-工程帳號">2. 工程帳號<a class="hash-link" aria-label="2. 工程帳號的直接連結" title="2. 工程帳號的直接連結" href="https://docsaid.org/blog/login-rtf8207w#2-%E5%B7%A5%E7%A8%8B%E5%B8%B3%E8%99%9F">​</a></h3>
<p>一般來說，帳號為：<code>cht</code>，密碼為<code>型號末四碼＋MAC末四碼</code>。</p>
<p><img decoding="async" loading="lazy" alt="password" src="https://docsaid.org/assets/images/RTF8207W-f4afe2030b552611fd3f8c281a364a3c.jpg" width="2048" height="1170" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-登入">3. 登入<a class="hash-link" aria-label="3. 登入的直接連結" title="3. 登入��的直接連結" href="https://docsaid.org/blog/login-rtf8207w#3-%E7%99%BB%E5%85%A5">​</a></h3>
<p>然後你就可以為所欲為了。</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>危險</div><div class="admonitionContent_BuS1"><p>如果不小心弄壞了設定，導致網路崩潰無法連線，請自行連絡<strong>中華電信工程師</strong>。</p><p>本文章僅供參考，不負任何責任。</p></div></div>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="rtf8207w" term="rtf8207w"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Fail2ban：保護 SSH 服務]]></title>
        <id>https://docsaid.org/blog/fail2ban-settings</id>
        <link href="https://docsaid.org/blog/fail2ban-settings"/>
        <updated>2023-09-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[把那些惡意都封鎖在外面。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0903-e5f8ba442b4f4ad7df17ee706b3e9ada.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>當你成功打開的外部的 SSH 通道之後，你會發現立刻出現一堆惡意連線，想嘗試登入你的主機。</p>
<p>一個基本的做法是開啟防火牆進行阻擋，我們趕緊來設定一下：</p>
<ul>
<li>
<p>惡意攻擊示意圖</p>
<p><img decoding="async" loading="lazy" alt="attack from ssh" src="https://docsaid.org/assets/images/ban_1-aab89918ab460891239cb1e4effc9589.jpg" width="616" height="764" class="img_ev3q"></p>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-fail2ban-安裝">1. Fail2ban 安裝<a class="hash-link" aria-label="1. Fail2ban 安裝的直接連結" title="1. Fail2ban 安裝的直接連結" href="https://docsaid.org/blog/fail2ban-settings#1-fail2ban-%E5%AE%89%E8%A3%9D">​</a></h2>
<p><strong>Fail2ban</strong> 是一個防止服務器受到暴力攻擊的軟體。當有可疑的行為（例如：重複的登錄失敗）出現時，Fail2ban 會自動修改防火牆規則來封鎖攻擊者的 IP 地址。</p>
<p>在大部分的 Linux 發行版上，你可以使用包管理工具來安裝 Fail2ban。</p>
<p>在 Ubuntu 上，你可以使用 apt 來安裝：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install fail2ban</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-設定">2. 設定<a class="hash-link" aria-label="2. 設定的直接連結" title="2. 設定的直接連結" href="https://docsaid.org/blog/fail2ban-settings#2-%E8%A8%AD%E5%AE%9A">​</a></h2>
<p>設定檔位於 <code>/etc/fail2ban/jail.conf</code>。</p>
<p>建議不直接修改此文件，而是複製一份到 <code>jail.local</code> 並修改它：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>編輯 <code>jail.local</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/fail2ban/jail.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>重要的設定參數：</strong></p>
<ul>
<li><strong>ignoreip:</strong> 忽略的 IP 地址或網段，例如： 127.0.0.1/8</li>
<li><strong>bantime:</strong> 封鎖時間，以秒為單位 (預設是 600 秒)</li>
<li><strong>findtime:</strong> 在這段時間內觀察到多少次失敗嘗試 (預設是 600 秒)</li>
<li><strong>maxretry:</strong> 在 findtime 所設定的時間內允許的最大失敗嘗試次數。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-啟動與監控">3. 啟動與監控<a class="hash-link" aria-label="3. 啟動與監控的直接連結" title="3. 啟動與監控的直接連結" href="https://docsaid.org/blog/fail2ban-settings#3-%E5%95%9F%E5%8B%95%E8%88%87%E7%9B%A3%E6%8E%A7">​</a></h2>
<p>啟動 Fail2ban：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service fail2ban start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>查看 Fail2ban 的狀態：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo fail2ban-client status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-新增自定義規則">4. 新增自定義規則<a class="hash-link" aria-label="4. 新增自定義規則的直接連結" title="4. 新增自定義規則的直接連結" href="https://docsaid.org/blog/fail2ban-settings#4-%E6%96%B0%E5%A2%9E%E8%87%AA%E5%AE%9A%E7%BE%A9%E8%A6%8F%E5%89%87">​</a></h2>
<p>如果你想為特定的服務（例如： SSH 或 Apache）設定特別的規則，你可以在 <code>jail.local</code> 裡新增或修改對應的段落，例如針對 SSH 的設定：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[sshd]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port = ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">filter = sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logpath = /var/log/auth.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxretry = 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-測試">5. 測試<a class="hash-link" aria-label="5. 測試的直接連結" title="5. 測試的直接連結" href="https://docsaid.org/blog/fail2ban-settings#5-%E6%B8%AC%E8%A9%A6">​</a></h2>
<p>在修改完設定後，重新啟動 Fail2ban 以應用更改：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service fail2ban restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然後從另一部機器或使用不同的 IP 進行測試，嘗試多次失敗登錄，看看是否被封鎖。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-查看">6. 查看<a class="hash-link" aria-label="6. 查看的直接連結" title="6. 查看的直接連結" href="https://docsaid.org/blog/fail2ban-settings#6-%E6%9F%A5%E7%9C%8B">​</a></h2>
<p>確保定期檢查日誌文件和更新規則，以獲得最佳的保護效果。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo fail2ban-client status sshd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="結語">結語<a class="hash-link" aria-label="結語的直接連結" title="結語的直接連結" href="https://docsaid.org/blog/fail2ban-settings#%E7%B5%90%E8%AA%9E">​</a></h2>
<p>整個過程只是步驟繁瑣，但也不算複雜。</p>
<p>希望這篇指南能夠幫助你順利完成相關設定。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="ubuntu" term="ubuntu"/>
        <category label="fail2ban" term="fail2ban"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Unicode 編碼區段表]]></title>
        <id>https://docsaid.org/blog/unicode-table</id>
        <link href="https://docsaid.org/blog/unicode-table"/>
        <updated>2023-09-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Unicode 編碼區段表，方便查詢。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0902-bc3a3c594a88486e236c1450b101c0bd.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>Unicode 是一個由非營利組織 Unicode 聯盟所維護的國際性字符編碼標準。該標準旨在統一世界上大部分的文字系統，從而實現跨平臺和多語言環境下的信息交流。Unicode 是 ISO/IEC 10646 標準的實現，也成為全球性的通用字元集。</p>
<p>在 Unicode 標準中，每個字符都對應到一個唯一的數字代碼，這個代碼被稱為「區段」（Code Point）。區段是 Unicode 標準中一個至關重要的概念，用於確定每個獨特字符的位置。</p>
<p>Unicode 的區段範圍從 U+0000 到 U+10FFFF，這意味著它可以容納 1,114,112 個不同的字符。這些區段按照不同的功能和用途被劃分成多個子集，例如：</p>
<ul>
<li>
<p>基本多文種平面（Basic Multilingual Plane, BMP）：U+0000 到 U+FFFF</p>
<p>包括了拉丁字母、希臘字母、漢字等常用字符。</p>
</li>
<li>
<p>補充平面（Supplementary Planes）：U+010000 到 U+10FFFF</p>
<p>包括了更多的象形文字、補充字符等。</p>
</li>
</ul>
<p>有鑒於我們每次需要查找 Unicode 編碼時，總是得花費半小時去把 wiki 的資料表翻出來，所以還是把一些基本的資訊儲存起來吧。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unicode-區段表">Unicode 區段表<a class="hash-link" aria-label="Unicode 區段表的直接連結" title="Unicode 區段表的直接連結" href="https://docsaid.org/blog/unicode-table#unicode-%E5%8D%80%E6%AE%B5%E8%A1%A8">​</a></h2>
<p>如果你有更近一步的需求，我們還是推薦你去查原始表格：<a href="https://zh.wikipedia.org/zh-tw/Unicode%E5%8D%80%E6%AE%B5" target="_blank" rel="noopener noreferrer"><strong>Unicode 區段</strong></a></p>
<table><thead><tr><th>平面</th><th>區段範圍</th><th>漢語名稱</th><th>英語名稱</th></tr></thead><tbody><tr><td>&nbsp;0&nbsp;BMP</td><td>0000 – 007F</td><td>基本拉丁字母</td><td>Basic Latin</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0080 – 00FF</td><td>拉丁字母補充-1</td><td>Latin-1 Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0100 – 017F</td><td>拉丁字母擴展-A</td><td>Latin Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0180 – 024F</td><td>拉丁字母擴展-B</td><td>Latin Extended-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0250 – 02AF</td><td>國際音標擴展</td><td>IPA Extensions</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>02B0 – 02FF</td><td>佔位修飾符號</td><td>Spacing Modifier Letters</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0300 – 036F</td><td>組合附加符號</td><td>Combining Diacritical Marks</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0370 – 03FF</td><td>希臘字母和科普特字母</td><td>Greek and Coptic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0400 – 04FF</td><td>西里爾字母</td><td>Cyrillic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0500 – 052F</td><td>西里爾字母補充</td><td>Cyrillic Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0530 – 058F</td><td>亞美尼亞字母</td><td>Armenian</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0590 – 05FF</td><td>希伯來文字母</td><td>Hebrew</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0600 – 06FF</td><td>阿拉伯文字母</td><td>Arabic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0700 – 074F</td><td>敘利亞字母</td><td>Syriac</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0750 – 077F</td><td>阿拉伯文補充</td><td>Arabic Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0780 – 07BF</td><td>它拿字母</td><td>Thaana</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>07C0 – 07FF</td><td>西非書面文字</td><td>NKo</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0800 – 083F</td><td>撒瑪利亞字母</td><td>Samaritan</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0840 – 085F</td><td>曼達安字母</td><td>Mandaic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0860 – 086F</td><td>敘利亞文補充</td><td>Syriac Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0870 – 089F</td><td>阿拉伯字母擴展-B</td><td>Arabic Extended-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>08A0 – 08FF</td><td>阿拉伯字母擴展-A</td><td>Arabic Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0900 – 097F</td><td>天城文</td><td>Devanagari</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0980 – 09FF</td><td>孟加拉文</td><td>Bengali</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0A00 – 0A7F</td><td>古木基文</td><td>Gurmukhi</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0A80 – 0AFF</td><td>古吉拉特文</td><td>Gujarati</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0B00 – 0B7F</td><td>奧里亞文</td><td>Oriya</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0B80 – 0BFF</td><td>泰米爾文</td><td>Tamil</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0C00 – 0C7F</td><td>泰盧固文</td><td>Telugu</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0C80 – 0CFF</td><td>卡納達文</td><td>Kannada</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0D00 – 0D7F</td><td>馬拉雅拉姆文</td><td>Malayalam</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0D80 – 0DFF</td><td>僧伽羅文</td><td>Sinhala</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0E00 – 0E7F</td><td>泰文</td><td>Thai</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0E80 – 0EFF</td><td>寮文</td><td>Lao</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>0F00 – 0FFF</td><td>藏文</td><td>Tibetan</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1000 – 109F</td><td>緬甸文</td><td>Myanmar</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>10A0 – 10FF</td><td>喬治亞字母</td><td>Georgian</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1100 – 11FF</td><td>諺文字母</td><td>Hangul Jamo</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1200 – 137F</td><td>衣索比亞字母</td><td>Ethiopic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1380 – 139F</td><td>衣索比亞字母補充</td><td>Ethiopic Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>13A0 – 13FF</td><td>切羅基文</td><td>Cherokee</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1400 – 167F</td><td>統一加拿大原住民音節文字</td><td>Unified Canadian Aboriginal Syllabics</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1680 – 169F</td><td>歐甘字母</td><td>Ogham</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>16A0 – 16FF</td><td>盧恩字母</td><td>Runic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1700 – 171F</td><td>他加祿字母</td><td>Tagalog</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1720 – 173F</td><td>哈努諾文</td><td>Hanunoo</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1740 – 175F</td><td>布希德字母</td><td>Buhid</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1760 – 177F</td><td>塔格班瓦字母</td><td>Tagbanwa</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1780 – 17FF</td><td>高棉文</td><td>Khmer</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1800 – 18AF</td><td>蒙古文</td><td>Mongolian</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>18B0 – 18FF</td><td>統一加拿大原住民音節文字擴充</td><td>Unified Canadian Aboriginal Syllabics Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1900 – 194F</td><td>林布文</td><td>Limbu</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1950 – 197F</td><td>德宏傣文</td><td>Tai Le</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1980 – 19DF</td><td>新傣仂文</td><td>New Tai Le</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>19E0 – 19FF</td><td>高棉文符號</td><td>Khmer Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1A00 – 1A1F</td><td>布吉文</td><td>Buginese</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1A20 – 1AAF</td><td>老傣文</td><td>Tai Tham</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1AB0 – 1AFF</td><td>組合附加符號擴展</td><td>Combining Diacritical Marks Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1B00 – 1B7F</td><td>峇里字母</td><td>Balinese</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1B80 – 1BBF</td><td>巽他字母</td><td>Sundanese</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1BC0 – 1BFF</td><td>巴塔克字母</td><td>Batak</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1C00 – 1C4F</td><td>絨巴文</td><td>Lepcha</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1C50 – 1C7F</td><td>桑塔利文</td><td>Ol Chiki</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1C80 – 1C8F</td><td>西里爾字母擴展-C</td><td>Cyrillic Extended-C</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1C90 – 1CBF</td><td>喬治亞字母擴展</td><td>Georgian Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1CC0 – 1CCF</td><td>巽他字母補充</td><td>Sundanese Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1CD0 – 1CFF</td><td>吠陀擴展</td><td>Vedic Extensions</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1D00 – 1D7F</td><td>音標擴展</td><td>Phonetic Extensions</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1D80 – 1DBF</td><td>音標擴展補充</td><td>Phonetic Extensions Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1DC0 – 1DFF</td><td>組合附加符號補充</td><td>Combining Diacritical Marks Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1E00 – 1EFF</td><td>拉丁字母擴展附加</td><td>Latin Extended Additional</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>1F00 – 1FFF</td><td>希臘字母擴展</td><td>Greek Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2000 – 206F</td><td>一般標點</td><td>General Punctuation</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2070 – 209F</td><td>上標及下標</td><td>Superscripts and Subscripts</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>20A0 – 20CF</td><td>貨幣符號</td><td>Currency Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>20D0 – 20FF</td><td>符號用組合附加符號</td><td>Combining Diacritical Marks for Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2100 – 214F</td><td>類字母符號</td><td>Letterlike Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2150 – 218F</td><td>數字形式</td><td>Number Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2190 – 21FF</td><td>箭頭</td><td>Arrows</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2200 – 22FF</td><td>數學運算子</td><td>Mathematical Operators</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2300 – 23FF</td><td>雜項技術符號</td><td>Miscellaneous Technical</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2400 – 243F</td><td>控制圖形</td><td>Control Pictures</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2440 – 245F</td><td>光學字元識別</td><td>Optical Character Recognition</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2460 – 24FF</td><td>圍繞字母數字</td><td>Enclosed Alphanumerics</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2500 – 257F</td><td>制表符</td><td>Box Drawing</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2580 – 259F</td><td>方塊元素</td><td>Block Elements</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>25A0 – 25FF</td><td>幾何圖形</td><td>Geometric Shapes</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2600 – 26FF</td><td>雜項符號</td><td>Miscellaneous Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2700 – 27BF</td><td>裝飾符號</td><td>Dingbats</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>27C0 – 27EF</td><td>雜項數學符號-A</td><td>Miscellaneous Mathematical Symbols-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>27F0 – 27FF</td><td>追加箭頭-A</td><td>Supplemental Arrows-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2800 – 28FF</td><td>點字圖案</td><td>Braille Patterns</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2900 – 297F</td><td>追加箭頭-B</td><td>Supplemental Arrows-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2980 – 29FF</td><td>雜項數學符號-B</td><td>Miscellaneous Mathematical Symbols-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2A00 – 2AFF</td><td>補充數學運算子</td><td>Supplemental Mathematical Operators</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2B00 – 2BFF</td><td>雜項符號和箭頭</td><td>Miscellaneous Symbols and Arrows</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2C00 – 2C5F</td><td>格拉哥里字母</td><td>Glagolitic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2C60 – 2C7F</td><td>拉丁字母擴展-C</td><td>Latin Extended-C</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2C80 – 2CFF</td><td>科普特字母</td><td>Coptic</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2D00 – 2D2F</td><td>喬治亞字母補充</td><td>Georgian Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2D30 – 2D7F</td><td>提非納文</td><td>Tifinagh</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2D80 – 2DDF</td><td>衣索比亞字母擴充</td><td>Ethiopic Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2DE0 – 2DFF</td><td>西里爾字母擴展-A</td><td>Cyrillic Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2E00 – 2E7F</td><td>補充標點</td><td>Supplemental Punctuation</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2E80 – 2EFF</td><td>中日韓漢字部首補充</td><td>CJK Radicals Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2F00 – 2FDF</td><td>康熙部首</td><td>Kangxi Radicals</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>2FF0 – 2FFF</td><td>表意文字描述字元</td><td>Ideographic Description Characters</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3000 – 303F</td><td>中日韓符號和標點</td><td>CJK Symbols and Punctuation</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3040 – 309F</td><td>平假名</td><td>Hiragana</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>30A0 – 30FF</td><td>片假名</td><td>Katakana</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3100 – 312F</td><td>注音符號</td><td>Bopomofo</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3130 – 318F</td><td>諺文相容字母</td><td>Hangul Compatibility Jamo</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3190 – 319F</td><td>漢文訓讀符號</td><td>Kanbun</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>31A0 – 31BF</td><td>注音符號擴展</td><td>Bopomofo Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>31C0 – 31EF</td><td>中日韓筆畫</td><td>CJK Strokes</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>31F0 – 31FF</td><td>片假名語音擴展</td><td>Katakana Phonetic Extensions</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3200 – 32FF</td><td>中日韓圍繞字元及月份</td><td>Enclosed CJK Letters and Months</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3300 – 33FF</td><td>中日韓相容字元</td><td>CJK Compatibility</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>3400 – 4DBF</td><td>中日韓統一表意文字擴充區 A</td><td>CJK Unified Ideographs Extension A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>4DC0 – 4DFF</td><td>易經六十四卦符號</td><td>Yijing Hexagram Symbols</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>4E00 – 9FFF</td><td>中日韓統一表意文字&nbsp;(基本區)</td><td>CJK Unified Ideographs</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A000 – A48F</td><td>彝文音節</td><td>Yi Syllables</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A490 – A4CF</td><td>彝文部首</td><td>Yi Radicals</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A4D0 – A4FF</td><td>傈僳文</td><td>Lisu</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A500 – A63F</td><td>瓦伊文</td><td>Vai</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A640 – A69F</td><td>西里爾字母擴展-B</td><td>Cyrillic Extended-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A6A0 – A6FF</td><td>巴姆穆文字</td><td>Bamum</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A700 – A71F</td><td>聲調修飾符號</td><td>Modifier Tone Letters</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A720 – A7FF</td><td>拉丁字母擴展-D</td><td>Latin Extended-D</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A800 – A82F</td><td>錫爾赫特文</td><td>Syloti Nagri</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A830 – A83F</td><td>通用印度數字形式</td><td>Common Indic Number Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A840 – A87F</td><td>八思巴文</td><td>Phags-pa</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A880 – A8DF</td><td>索拉什特拉文</td><td>Saurashtra</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A8E0 – A8FF</td><td>天城文擴展</td><td>Devanagari Extended</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A900 – A92F</td><td>克耶字母</td><td>Kayah Li</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A930 – A95F</td><td>勒姜字母</td><td>Rejang</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A960 – A97F</td><td>諺文字母擴展-A</td><td>Hangul Jamo Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A980 – A9DF</td><td>爪哇字母</td><td>Javanese</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>A9E0 – A9FF</td><td>緬甸文擴展-B</td><td>Myanmar Extended-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AA00 – AA5F</td><td>占文</td><td>Cham</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AA60 – AA7F</td><td>緬甸文擴展-A</td><td>Myanmar Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AA80 – AADF</td><td>傣越文</td><td>Tai Viet</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AAE0 – AAFF</td><td>梅泰文擴充</td><td>Meetei Mayek Extensions</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AB00 – AB2F</td><td>衣索比亞字母擴充-A</td><td>Ethiopic Extended-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AB30 – AB6F</td><td>拉丁字母擴展-E</td><td>Latin Extended-E</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AB70 – ABBF</td><td>切羅基文補充</td><td>Cherokee Supplement</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>ABC0 – ABFF</td><td>梅泰文</td><td>Meetei Mayek</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>AC00 – D7AF</td><td>諺文音節</td><td>Hangul Syllables</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>D7B0 – D7FF</td><td>諺文字母擴展-B</td><td>Hangul Jamo Extended-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>D800 – DB7F</td><td>高半代用區</td><td>High Surrogates</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>DB80 – DBFF</td><td>高半私人代用區</td><td>High Private Use Surrogates</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>DC00 – DFFF</td><td>低半代用區</td><td>Low Surrogates</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>E000 – F8FF</td><td>私用區</td><td>Private Use Area</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>F900 – FAFF</td><td>中日韓相容表意文字</td><td>CJK Compatibility Ideographs</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FB00 – FB4F</td><td>字母表達形式</td><td>Alphabetic Presentation Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FB50 – FDFF</td><td>阿拉伯字母表達形式-A</td><td>Arabic Presentation Forms-A</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE00 – FE0F</td><td>變體選擇符</td><td>Variation Selectors</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE10 – FE1F</td><td>豎排形式</td><td>Vertical Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE20 – FE2F</td><td>組合用半符號</td><td>Combining Half Marks</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE30 – FE4F</td><td>中日韓相容形式</td><td>CJK Compatibility Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE50 – FE6F</td><td>小寫變體形式</td><td>Small Form Variants</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FE70 – FEFF</td><td>阿拉伯字母表達形式-B</td><td>Arabic Presentation Forms-B</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FF00 – FFEF</td><td>半形及全形字元</td><td>Halfwidth and Fullwidth Forms</td></tr><tr><td>&nbsp;0&nbsp;BMP</td><td>FFF0 – FFFF</td><td>特殊</td><td>Specials</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10000 – 1007F</td><td>線形文字 B 音節文字</td><td>Linear B Syllabary</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10080 – 100FF</td><td>線形文字 B 表意文字</td><td>Linear B Ideograms</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10100 – 1013F</td><td>愛琴海數字</td><td>Aegean Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10140 – 1018F</td><td>古希臘數字</td><td>Ancient Greek Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10190 – 101CF</td><td>古代符號</td><td>Ancient Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>101D0 – 101FF</td><td>斐斯托斯圓盤</td><td>Phaistos Disc</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10280 – 1029F</td><td>呂基亞字母</td><td>Lycian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>102A0 – 102DF</td><td>卡里亞字母</td><td>Carian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>102E0 – 102FF</td><td>科普特閏餘數字</td><td>Coptic Epact Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10300 – 1032F</td><td>古義大利字母</td><td>Old Italic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10330 – 1034F</td><td>哥特字母</td><td>Gothic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10350 – 1037F</td><td>古彼爾姆文</td><td>Old Permic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10380 – 1039F</td><td>烏加里特字母</td><td>Ugaritic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>103A0 – 103DF</td><td>古波斯楔形文字</td><td>Old Persian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10400 – 1044F</td><td>德瑟雷特字母</td><td>Deseret</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10450 – 1047F</td><td>蕭伯納字母</td><td>Shavian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10480 – 104AF</td><td>奧斯曼亞字母</td><td>Osmanya</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>104B0 – 104FF</td><td>歐塞奇字母</td><td>Osage</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10500 – 1052F</td><td>愛爾巴桑字母</td><td>Elbasan</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10530 – 1056F</td><td>高加索阿爾巴尼亞字母</td><td>Caucasian Albanian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10570 – 105BF</td><td>維斯庫奇文</td><td>Vithkuqi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10600 – 1077F</td><td>線形文字 A</td><td>Linear A</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10780 – 107BF</td><td>拉丁字母擴展-F</td><td>Latin Extended-F</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10800 – 1083F</td><td>賽普勒斯音節文字</td><td>Cypriot Syllabary</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10840 – 1085F</td><td>帝國亞拉姆文</td><td>Imperial Aramaic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10860 – 1087F</td><td>帕爾邁拉字母</td><td>Palmyrene</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10880 – 108AF</td><td>納巴泰字母</td><td>Nabataean</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>108E0 – 108FF</td><td>哈特拉文</td><td>Hatran</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10900 – 1091F</td><td>腓尼基字母</td><td>Phoenician</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10920 – 1093F</td><td>呂底亞字母</td><td>Lydian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10980 – 1099F</td><td>麥羅埃文聖書體</td><td>Meroitic Hieroglyphs</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>109A0 – 109FF</td><td>麥羅埃文草書體</td><td>Meroitic Cursive</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10A00 – 10A5F</td><td>佉盧文</td><td>Kharoshthi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10A60 – 10A7F</td><td>古南阿拉伯字母</td><td>Old South Arabian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10A80 – 10A9F</td><td>古北阿拉伯字母</td><td>Old North Arabian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10AC0 – 10AFF</td><td>摩尼字母</td><td>Manichaean</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10B00 – 10B3F</td><td>阿維斯陀字母</td><td>Avestan</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10B40 – 10B5F</td><td>碑刻帕提亞文</td><td>Inscriptional Parthian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10B60 – 10B7F</td><td>碑刻巴列維文</td><td>Inscriptional Pahlavi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10B80 – 10BAF</td><td>詩篇巴列維文</td><td>Psalter Pahlavi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10C00 – 10C4F</td><td>古突厥文</td><td>Old Turkic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10C80 – 10CFF</td><td>古匈牙利字母</td><td>Old Hungarian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10D00 – 10D3F</td><td>哈乃斐羅興亞文字</td><td>Hanifi Rohingya</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10E60 – 10E7F</td><td>盧米文數字</td><td>Rumi Numeral Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10E80 – 10EBF</td><td>雅茲迪文</td><td>Yezidi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10EC0 – 10EFF</td><td>阿拉伯字母擴展-C</td><td>Arabic Extended-C</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10F00 – 10F2F</td><td>古粟特字母</td><td>Old Sogdian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10F30 – 10F6F</td><td>粟特字母</td><td>Sogdian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10F70 – 10FAF</td><td>回鶻字母</td><td>Old Uyghur</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10FB0 – 10FDF</td><td>花剌子模字母</td><td>Chorasmian</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>10FE0 – 10FFF</td><td>埃利邁文</td><td>Elymaic</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11000 – 1107F</td><td>婆羅米文</td><td>Brahmi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11080 – 110CF</td><td>凱提文</td><td>Kaithi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>110D0 – 110FF</td><td>索拉僧平文字</td><td>Sora Sompeng</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11100 – 1114F</td><td>查克馬文</td><td>Chakma</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11150 – 1117F</td><td>馬哈佳尼文</td><td>Mahajani</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11180 – 111DF</td><td>夏拉達文</td><td>Sharada</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>111E0 – 111FF</td><td>古僧伽羅文數字</td><td>Sinhala Archaic Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11200 – 1124F</td><td>可吉文</td><td>Khojki</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11280 – 112AF</td><td>穆爾塔尼文</td><td>Multani</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>112B0 – 112FF</td><td>庫達瓦迪文</td><td>Khudawadi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11300 – 1137F</td><td>古蘭塔文</td><td>Grantha</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11400 – 1147F</td><td>紐瓦字母</td><td>Newa</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11480 – 114DF</td><td>底羅僕多文</td><td>Tirhuta</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11580 – 115FF</td><td>悉曇文字</td><td>Siddham</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11600 – 1165F</td><td>莫迪文</td><td>Modi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11660 – 1167F</td><td>蒙古文補充</td><td>Mongolian Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11680 – 116CF</td><td>塔克里文</td><td>Takri</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11700 – 1174F</td><td>阿洪姆文</td><td>Ahom</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11800 – 1184F</td><td>多格拉文</td><td>Dogra</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>118A0 – 118FF</td><td>瓦蘭齊地文</td><td>Warang Citi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11900 – 1195F</td><td>島嶼字母</td><td>Dhives Akuru (Dives Akuru)</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>119A0 – 119FF</td><td>南迪城文</td><td>Nandinagari</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11A00 – 11A4F</td><td>札那巴札爾方形字母</td><td>Zanabazar Square</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11A50 – 11AAF</td><td>索永布文字</td><td>Soyombo</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11AB0 – 11ABF</td><td>加拿大原住民音節文字擴展-A</td><td>Unified Canadian Aboriginal Syllabics Extended-A</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11AC0 – 11AFF</td><td>包欽豪文</td><td>Pau Cin Hau</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11B00 – 11B5F</td><td>天城文擴展-A</td><td>Devanagari Extended-A</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11C00 – 11C6F</td><td>拜克舒基文</td><td>Bhaiksuki</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11C70 – 11CBF</td><td>瑪欽文</td><td>Marchen</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11D00 – 11D5F</td><td>馬薩拉姆貢德文字</td><td>Masaram Gondi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11D60 – 11DAF</td><td>貢賈拉貢德文字</td><td>Gunjala Gondi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11EE0 – 11EFF</td><td>望加錫文</td><td>Makasar</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11F00 – 11F5F</td><td>卡維文</td><td>Kawi</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11FB0 – 11FBF</td><td>老傈僳文補充</td><td>Lisu Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>11FC0 – 11FFF</td><td>泰米爾文補充</td><td>Tamil Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>12000 – 123FF</td><td>楔形文字</td><td>Cuneiform</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>12400 – 1247F</td><td>楔形文字數字和標點符號</td><td>Cuneiform Numbers and Punctuation</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>12480 – 1254F</td><td>早期王朝楔形文字</td><td>Early Dynastic Cuneiform</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>12F90 – 12FFF</td><td>賽普勒斯-米諾斯文字</td><td>Cypro-Minoan</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>13000 – 1342F</td><td>埃及聖書體</td><td>Egyptian Hieroglyphs</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>13430 – 1345F</td><td>埃及聖書體格式控制</td><td>Egyptian Hieroglyph Format Controls</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>14400 – 1467F</td><td>安納托利亞象形文字</td><td>Anatolian Hieroglyphs</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16800 – 16A3F</td><td>巴姆穆文字補充</td><td>Bamum Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16A40 – 16A6F</td><td>默祿文</td><td>Mro</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16A70 – 16ACF</td><td>唐薩文</td><td>Tangsa</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16AD0 – 16AFF</td><td>巴薩文</td><td>Bassa Vah</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16B00 – 16B8F</td><td>救世苗文</td><td>Pahawh Hmong</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16E40 – 16E9F</td><td>梅德法伊德林文</td><td>Medefaidrin</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16F00 – 16F9F</td><td>柏格理苗文</td><td>Miao</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>16FE0 – 16FFF</td><td>表意符號和標點符號</td><td>Ideographic Symbols and Punctuation</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>17000 – 187FF</td><td>西夏文</td><td>Tangut</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>18800 – 18AFF</td><td>西夏文部件</td><td>Tangut Components</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>18B00 – 18CFF</td><td>契丹小字</td><td>Khitan Small Script</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>18D00 – 18D7F</td><td>西夏文補充</td><td>Tangut Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1AFF0 – 1AFFF</td><td>假名擴展-B</td><td>Kana Extended-B</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1B000 – 1B0FF</td><td>假名補充</td><td>Kana Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1B100 – 1B12F</td><td>假名擴展-A</td><td>Kana Extended-A</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1B130 – 1B16F</td><td>小型假名擴充</td><td>Small Kana Extension</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1B170 – 1B2FF</td><td>女書</td><td>Nushu</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1BC00 – 1BC9F</td><td>杜普雷速記</td><td>Duployan</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1BCA0 – 1BCAF</td><td>速記格式控制符</td><td>Shorthand Format Controls</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1CF00 – 1CFCF</td><td>贊玫尼聖歌音樂符號</td><td>Znamenny Musical Notation</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D000 – 1D0FF</td><td>拜占庭音樂符號</td><td>Byzantine Musical Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D100 – 1D1FF</td><td>音樂符號</td><td>Musical Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D200 – 1D24F</td><td>古希臘音樂記號</td><td>Ancient Greek Musical Notation</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D2C0 – 1D2DF</td><td>卡克托維克數字</td><td>Kaktovik Numerals</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D2E0 – 1D2FF</td><td>瑪雅數字</td><td>Mayan Numerals</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D300 – 1D35F</td><td>太玄經符號</td><td>Tai Xuan Jing Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D360 – 1D37F</td><td>算籌</td><td>Counting Rod Numerals</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D400 – 1D7FF</td><td>字母和數字符號</td><td>Mathematical Alphanumeric Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1D800 – 1DAAF</td><td>薩頓書寫符號</td><td>Sutton SignWriting</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1DF00 – 1DFFF</td><td>拉丁字母擴展-G</td><td>Latin Extended-G</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E000 – 1E02F</td><td>格拉哥里字母補充</td><td>Glagolitic Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E030 – 1E08F</td><td>西里爾字母擴展-D</td><td>Cyrillic Extended-D</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E100 – 1E14F</td><td>創世紀苗文</td><td>Nyiakeng Puachue Hmong</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E290 – 1E2BF</td><td>投投文</td><td>Toto</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E2C0 – 1E2FF</td><td>文喬字母</td><td>Wancho</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E4D0 – 1E4FF</td><td>蒙達里字母</td><td>Nag Mundari</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E7E0 – 1E7FF</td><td>衣索比亞字母擴充-B</td><td>Ethiopic Extended-B</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E800 – 1E8DF</td><td>門德基卡庫文</td><td>Mende Kikakui</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1E900 – 1E95F</td><td>阿德拉姆字母</td><td>Adlam</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1EC70 – 1ECBF</td><td>印度西亞格數字</td><td>Indic Siyaq Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1ED00 – 1ED4F</td><td>奧斯曼西亞格數字</td><td>Ottoman Siyaq Numbers</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1EE00 – 1EEFF</td><td>阿拉伯字母數字符號</td><td>Arabic Mathematical Alphabetic Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F000 – 1F02F</td><td>麻將牌</td><td>Mahjong Tiles</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F030 – 1F09F</td><td>多米諾骨牌</td><td>Domino Tiles</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F0A0 – 1F0FF</td><td>撲克牌</td><td>Playing Cards</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F100 – 1F1FF</td><td>圍繞字母數字補充</td><td>Enclosed Alphanumeric Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F200 – 1F2FF</td><td>圍繞表意文字補充</td><td>Enclosed Ideographic Supplement</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F300 – 1F5FF</td><td>雜項符號和象形文字</td><td>Miscellaneous Symbols and Pictographs</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F600 – 1F64F</td><td>表情符號</td><td>Emoticons</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F650 – 1F67F</td><td>裝飾符號</td><td>Ornamental Dingbats</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F680 – 1F6FF</td><td>交通和地圖符號</td><td>Transport and Map Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F700 – 1F77F</td><td>鍊金術符號</td><td>Alchemical Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F780 – 1F7FF</td><td>幾何圖形擴展</td><td>Geometric Shapes Extended</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F800 – 1F8FF</td><td>追加箭頭-C</td><td>Supplemental Arrows-C</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1F900 – 1F9FF</td><td>補充符號和象形文字</td><td>Supplemental Symbols and Pictographs</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1FA00 – 1FA6F</td><td>棋類符號</td><td>Chess Symbols</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1FA70 – 1FAFF</td><td>符號和象形文字擴充-A</td><td>Symbols and Pictographs Extended-A</td></tr><tr><td>&nbsp;1&nbsp;SMP</td><td>1FB00 – 1FBFF</td><td>遺留計算符號</td><td>Symbols for Legacy Computing</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>20000 – 2A6DF</td><td>中日韓統一表意文字擴充區 B</td><td>CJK Unified Ideographs Extension B</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>2A700 – 2B73F</td><td>中日韓統一表意文字擴充區 C</td><td>CJK Unified Ideographs Extension C</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>2B740 – 2B81F</td><td>中日韓統一表意文字擴充區 D</td><td>CJK Unified Ideographs Extension D</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>2B820 – 2CEAF</td><td>中日韓統一表意文字擴充區 E</td><td>CJK Unified Ideographs Extension E</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>2CEB0 – 2EBEF</td><td>中日韓統一表意文字擴充區 F</td><td>CJK Unified Ideographs Extension F</td></tr><tr><td>&nbsp;2&nbsp;SIP</td><td>2F800 – 2FA1F</td><td>中日韓相容表意文字補充區</td><td>CJK Compatibility Ideographs Supplement</td></tr><tr><td>&nbsp;3&nbsp;TIP</td><td>30000 – 3134F</td><td>中日韓統一表意文字擴充區 G</td><td>CJK Unified Ideographs Extension G</td></tr><tr><td>&nbsp;3&nbsp;TIP</td><td>31350 – 323AF</td><td>中日韓統一表意文字擴充區 H</td><td>CJK Unified Ideographs Extension H</td></tr><tr><td>14&nbsp;SSP</td><td>E0000 – E007F</td><td>標籤</td><td>Tags</td></tr><tr><td>14&nbsp;SSP</td><td>E0100 – E01EF</td><td>變體選擇符補充</td><td>Variation Selectors Supplement</td></tr><tr><td>15&nbsp;PUA-A</td><td>F0000 – FFFFF</td><td>補充私人使用區-A</td><td>Supplementary Private Use Area-A</td></tr><tr><td>16&nbsp;PUA-B</td><td>100000 – 10FFFF</td><td>補充私人使用區-B</td><td>Supplementary Private Use Area-B</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="參考文獻">參考文獻<a class="hash-link" aria-label="參考文獻的直接連結" title="參考文獻的直接連結" href="https://docsaid.org/blog/unicode-table#%E5%8F%83%E8%80%83%E6%96%87%E7%8D%BB">​</a></h2>
<ul>
<li><a href="https://zh.wikipedia.org/zh-tw/Unicode%E5%AD%97%E7%AC%A6%E5%B9%B3%E9%9D%A2%E6%98%A0%E5%B0%84" target="_blank" rel="noopener noreferrer">Unicode 字元平面對映</a></li>
<li><a href="https://zh.wikipedia.org/zh-tw/Unicode%E5%8D%80%E6%AE%B5" target="_blank" rel="noopener noreferrer">Unicode 區段</a></li>
</ul>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="unicode" term="unicode"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[為 VPN 設定選擇性流量路由]]></title>
        <id>https://docsaid.org/blog/mac-selective-vpn-routing</id>
        <link href="https://docsaid.org/blog/mac-selective-vpn-routing"/>
        <updated>2023-09-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[在 Mac 上設定 VPN 路由。]]></summary>
        <content type="html"><![CDATA[<figure><p><img decoding="async" loading="lazy" alt="title" src="https://docsaid.org/assets/images/0901-cd1dcedc069a7e8c380af9af9c39c0f7.webp" width="1024" height="1024" class="img_ev3q">
</p><figcaption>封面圖片：由 GPT-4 閱讀本文之後自動生成</figcaption><p></p></figure>
<hr>
<p>居家辦公使用公司配置的 VPN，但我們仍想要使用本地端的其他的機器，舉例來說：</p>
<ul>
<li>公司 VPN 網段：192.168.25.XXX</li>
<li>家裡的網段：192.168.1.XXX</li>
</ul>
<p>這時候如果打開 VPN，所有的流量都會走到公司的網段，所以你將無法連上家裡相同網域內的其他機器。</p>
<p>不僅如此，你在家裡刷了個好笑的影片看著，殊不知公司的網管也跟著你一起笑了起來。</p>
<p>這不太對吧？</p>
<p>所以我們要做的事情是：<strong>讓 VPN 只導入公司的網段，其他的流量都走本地端。</strong></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_BuS1"><p>我假定你已經將 VPN 設定好，並可以正常使用，這次只是要解決分流的問題。</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="解決問題">解決問題<a class="hash-link" aria-label="解決問題的直接連結" title="解決問題的直接連結" href="https://docsaid.org/blog/mac-selective-vpn-routing#%E8%A7%A3%E6%B1%BA%E5%95%8F%E9%A1%8C">​</a></h2>
<p>第一步，先確認公司內部的網段是什麼，例如：</p>
<p>192.168.25.XXX</p>
<p>接著，讓我們開啟一份文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo vim /etc/ppp/ip-up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>輸入以下內容，請記得要換上你的網段：</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>請注意，這裡的範例都是假設 VPN 的網段是 192.168.25.XXX，請你依照實際情況修改。</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/sbin/route add -net 192.168.25.0/24 -interface ppp0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>簡單解釋一下上面指令的意思：</p>
<ol>
<li>
<p><strong>/sbin/route</strong></p>
<p>這是 route 命令的路徑，route 命令用於在網絡中設定和顯示路由表。</p>
</li>
<li>
<p><strong>-net 192.168.25.0/24</strong></p>
<p>參數指定這是一個網絡路由，而不是主機路由。 192.168.25.0/24 是網絡地址和子網掩碼，它代表 192.168.25.0 到 192.168.25.255 的 IP 地址範圍。</p>
</li>
<li>
<p><strong>-interface ppp0</strong></p>
<p>指定路由應通過哪個網絡接口。在這個例子中，它是 ppp0（點對點協議接口 0）。</p>
</li>
</ol>
<p>整個指令的功能是通過 ppp0 接口添加一個到 192.168.25.0/24 網絡的路由。當你的系統試圖訪問 192.168.25.0/24 網絡中的任何 IP 地址時，它將通過 ppp0 接口路由流量。</p>
<p>接著，存檔後退出，給予檔案權限：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 755 /etc/ppp/ip-up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="還是壞了">還是壞了？<a class="hash-link" aria-label="還是壞了？的直接連結" title="還是壞了？的直接連結" href="https://docsaid.org/blog/mac-selective-vpn-routing#%E9%82%84%E6%98%AF%E5%A3%9E%E4%BA%86">​</a></h2>
<p>到這邊，可能有一部分的的機器還是無法上網，所以我們接著看：</p>
<p>打開 MacOC 的系統設定，找到網路，如下圖：</p>
<ul>
<li>步驟１：打開系統設定，點選「網路」</li>
<li>步驟２：點選旁邊小點點</li>
<li>步驟３：點選「設定服務順序」</li>
<li>步驟４：把 VPN 的順序拖到 Wi-Fi 後面</li>
</ul>
<p><img decoding="async" loading="lazy" alt="vpn-setting" src="https://docsaid.org/assets/images/vpn-setting-bd7c48703bedfb577a1954606aad8726.jpg" width="2048" height="1699" class="img_ev3q"></p>
<p>存在這一步驟的原因是：很多設定完 VPN 後，會將 VPN 的服務順序拉到最上層，意味著將所有的流量優先導入 VPN 內，所以這邊我們要把 VPN 拉下來，如此一來，上面的網路設定才能生效。</p>
<p>到這邊就完成了，之後有其他流量需要走 VPN 的話，就把位置寫到 ip-up 文件內即可。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="參考資料">參考資料<a class="hash-link" aria-label="參考資料的直接連結" title="參考資料的直接連結" href="https://docsaid.org/blog/mac-selective-vpn-routing#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99">​</a></h2>
<ol>
<li><a href="https://gist.github.com/shalyf/d50b0bbf30a4b5020d2b84f4ae8eb4e0" target="_blank" rel="noopener noreferrer">shalyf/vpn_route.md</a></li>
<li><a href="https://superuser.com/questions/4904/how-to-selectively-route-network-traffic-through-vpn-on-mac-os-x-leopard" target="_blank" rel="noopener noreferrer">How to selectively route network traffic through VPN on Mac OS X Leopard?</a></li>
</ol>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="routing" term="routing"/>
        <category label="vpn" term="vpn"/>
        <category label="macos" term="macos"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[隱私政策]]></title>
        <id>https://docsaid.org/blog/privacy-policy</id>
        <link href="https://docsaid.org/blog/privacy-policy"/>
        <updated>2023-08-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[隱私政策]]></summary>
        <content type="html"><![CDATA[<p>歡迎您訪問 DOCSAID，以下簡稱本網站。我們非常重視您的隱私權，並致力於保護您的個人資訊。請在使用本網站之前詳細閱讀以下隱私權保護政策，以了解我們的資訊收集、使用和保護做法。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="一範圍適用">一、範圍適用<a class="hash-link" aria-label="一、範圍適用的直接連結" title="一、範圍適用的直接連結" href="https://docsaid.org/blog/privacy-policy#%E4%B8%80%E7%AF%84%E5%9C%8D%E9%81%A9%E7%94%A8">​</a></h2>
<p>本隱私政策適用於您訪問本網站、使用我們的服務，以及參與相關互動的所有情況。請注意，本政策不涵蓋可能包含在本網站內的外部連結，也不適用於由非本網站所委託或管理的第三方網站。我們建議您在進入其他網站之前閱讀其隱私政策，以確保您理解他們如何處理您的個人資訊。</p>
<p>我們強調，我們僅在本隱私政策所描述的情況下，蒐集、使用和保護您的個人資訊。如果您不同意本政策，請避免使用本網站提供的服務和功能。</p>
<p>我們將定期審查和更新本隱私政策，以確保其與我們的資料處理實踐和法律法規的一致性。這些變更將在本網站上公布，因此我們建議您定期查看以獲取最新信息。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="二資料的蒐集與使用">二、資料的蒐集與使用<a class="hash-link" aria-label="二、資料的蒐集與使用的直接連結" title="二、資料的蒐集與使用的直接連結" href="https://docsaid.org/blog/privacy-policy#%E4%BA%8C%E8%B3%87%E6%96%99%E7%9A%84%E8%92%90%E9%9B%86%E8%88%87%E4%BD%BF%E7%94%A8">​</a></h2>
<p>當您使用本網站時，我們可能會要求您提供特定的個人資訊，以便向您提供更好的服務體驗。</p>
<p>以下是可能蒐集的一些資訊類型：</p>
<ul>
<li>姓名、電子郵件地址、聯絡資訊：當您使用我們的互動功能，例如：註冊帳戶、填寫問卷或使用信箱時，我們可能會收集這些資訊，以便與您溝通並提供相關的支援和服務。</li>
<li>IP 地址、瀏覽器類型、使用時間：我們可能會自動收集您的 IP 地址、瀏覽器類型、訪問時間等訪問日誌資訊。這些資訊將有助於我們改進網站性能、提高服務品質以及確保網站的安全性。</li>
<li>我們也可能對問卷調查等數據進行統計和分析，但我們將確保這些統計結果是匿名的，並不會涉及特定個人身分。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="三資訊安全">三、資訊安全<a class="hash-link" aria-label="三、資訊安全的直接連結" title="三、資訊安全的直接連結" href="https://docsaid.org/blog/privacy-policy#%E4%B8%89%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8">​</a></h2>
<p>我們深知保護您的個人資料免於未經授權的訪問、使用或洩露的重要性。因此，我們採用了多種技術和程序來確保您的資訊安全。以下是我們所採取的安全措施：</p>
<ul>
<li>數據加密：我們使用加密技術來保護在傳輸過程中的敏感資訊。這意味著在資訊從您的設備傳送到我們的伺服器，以及從伺服器返回到您的設備時，資訊都會被加密，降低了未經授權訪問的風險。</li>
<li>存取控制：我們實施嚴格的存取控制，僅授予有權限的員工和服務提供商訪問您的個人資訊。這些人員需要進行嚴格的身分驗證，並且僅在執行特定任務時才能訪問相關資訊。</li>
<li>密碼保護：您的帳戶信息和相關數據可能會受到密碼的保護。我們強烈建議您選擇強大且獨特的密碼，定期更換密碼，並不將密碼透露給他人。</li>
<li>安全審查：我們定期進行安全審查，以確保我們的系統和流程足夠堅固，能夠應對不斷變化的威脅和風險。</li>
</ul>
<p>儘管我們已經採取了各種措施來保護您的資訊，但請理解互聯網並非絕對安全的環境。您應該保持警惕，不在未經驗證的情況下透露您的個人資訊。</p>
<p>如果您認為自己的帳戶安全受到威脅，或發現任何安全漏洞，請立即通知我們，以便我們能夠採取適當的措施保護您的資訊。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="四外部連結">四、外部連結<a class="hash-link" aria-label="四、外部連結的直接連結" title="四、外部連結的直接連結" href="https://docsaid.org/blog/privacy-policy#%E5%9B%9B%E5%A4%96%E9%83%A8%E9%80%A3%E7%B5%90">​</a></h2>
<p>我們的網站可能包含指向其他網站或服務的連結，這些網站可能與我們無關，並且可能擁有其自己的隱私政策。</p>
<p>我們提供這些連結僅為您的方便，以便您可以獲取更多有關主題的相關信息。</p>
<p>然而，請注意，當您點擊這些外部連結時，您將離開本網站，我們對您在這些連結指向的網站上的資訊使用和隱私政策概不負責。</p>
<p>我們強烈建議您在訪問任何外部連結之前閱讀相關網站的隱私政策，以確保您理解他們如何收集、使用和分享您的個人資訊。</p>
<p>我們無法控制這些外部網站的資訊收集實踐，因此建議您謹慎對待您在這些網站上提供的任何個人資訊。</p>
<p>如果您通過我們的網站訪問了其他網站，我們建議您閱讀和理解該網站的隱私政策，以確保您的隱私得到適當的保護。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="五資料分享">五、資料分享<a class="hash-link" aria-label="五、資料分享的直接連結" title="五、資料分享的直接連結" href="https://docsaid.org/blog/privacy-policy#%E4%BA%94%E8%B3%87%E6%96%99%E5%88%86%E4%BA%AB">​</a></h2>
<p>我們承諾保護您的個人資料，並尊重您的隱私權。我們不會未經您的明確許可，將您的個人資料銷售、交換或轉讓給任何非關聯的第三方。</p>
<p>您的個人資訊僅在下列情況下可能被分享：</p>
<ul>
<li>您的許可：在某些情況下，我們可能會要求您的明確許可，才能與第三方共享您的資訊。例如：當您參加促銷活動或合作計劃時，我們可能需要分享您的相關資訊，以便完成相關事宜。</li>
<li>法律要求：我們有義務遵守適用的法律法規，包括但不限於法院命令、法律程序或政府要求。在這些情況下，我們可能會分享您的資訊，以履行我們的法律義務和法律程序。</li>
<li>公共安全目的：我們可能會分享您的個人資訊，以保護公共安全和防止欺詐、安全事故或違法行為。這可能包括將資訊與執法機構、政府機構或其他相關組織分享。</li>
</ul>
<p>無論在何種情況下，我們都會盡一切合理努力確保您的個人資訊得到適當的保護。我們不會輕率地分享您的資訊，並將遵循適用的法律法規和最佳實踐來處理資料分享事宜。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="六cookie-技術">六、Cookie 技術<a class="hash-link" aria-label="六、Cookie 技術的直接連結" title="六、Cookie 技術的直接連結" href="https://docsaid.org/blog/privacy-policy#%E5%85%ADcookie-%E6%8A%80%E8%A1%93">​</a></h2>
<p>為了提供更好的用戶體驗，我們可能會在您的設備上使用 Cookie 和類似技術。Cookie 是小型文本文件，它們被存儲在您的設備上的瀏覽器中，用於記錄有關您的訪問和互動的信息。這些信息可能包括訪問時間、訪問的頁面、設備信息等。</p>
<p>我們使用 Cookie 的主要目的是：</p>
<ul>
<li>提供個人化的用戶體驗：Cookie 允許我們記住您的偏好和選擇，從而在您再次訪問時提供更加個人化的內容和功能。</li>
<li>分析和改進：我們使用 Cookie 來分析網站的使用情況，以了解流量模式、使用習慣和頁面互動，這有助於我們改進網站的性能和功能。</li>
</ul>
<p>您可以根據自己的偏好管理瀏覽器中的 Cookie 設置。大多數瀏覽器允許您控制、管理或刪除 Cookie。然而，請注意，禁用或限制 Cookie 可能會影響某些網站的功能和使用體驗。如果您選擇禁用或限制 Cookie，可能無法充分體驗本網站提供的所有功能。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="privacy-policy" term="privacy-policy"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用條款]]></title>
        <id>https://docsaid.org/blog/terms-of-service</id>
        <link href="https://docsaid.org/blog/terms-of-service"/>
        <updated>2023-08-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[使用條款]]></summary>
        <content type="html"><![CDATA[<p>我們強烈建議您定期查看這些使用條款，以確保您始終保持對其的了解，因為我們可能會在未來進行修改或更新。希望您在 DOCSAID 網站有一個愉快的瀏覽體驗，並尊重和遵守我們設定的規範。</p>
<p>本網站由 DOCSAID 所擁有和經營。在您使用本網站之前，我們建議您詳細閱讀和了解這些使用條款，確保您完全明白您的權利和責任。這不僅有助於保護您的權益，也有助於確保本網站能夠為所有使用者提供一個安全和高效的環境。</p>
<p>這些使用條款的目的是為了確保本網站的正常運作，並為使用者提供清晰的使用指引。這些條款也反映了我們對使用者的承諾，以及我們對確保一個良好網絡環境的決心。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="一智慧財產產權">一、智慧財產產權<a class="hash-link" aria-label="一、智慧財產產權的直接連結" title="一、智慧財產產權的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%B8%80%E6%99%BA%E6%85%A7%E8%B2%A1%E7%94%A2%E7%94%A2%E6%AC%8A">​</a></h2>
<p>本網站上包含的所有內容、圖片、文字、圖表、標誌、圖示、音頻創作、影片創作以及其他材料（以下統稱為「材料」）均受到智慧財產權法律的保護，包括但不限於著作權、商標權、專利權、設計權和商業秘密。</p>
<ul>
<li>版權：本網站的材料，包括但不限於文字、圖像、影片等，均受到版權法的保護。這意味著除非您獲得明確的許可，否則您不得未經授權使用、複製、修改或分發這些材料。</li>
<li>商標權：本網站上的所有商標、標誌和商號均受到商標法的保護。這些商標和標誌可能是 DOCSAID 網站或其關聯實體的註冊商標，或在特定司法管轄區中享有法律保護。未經授權，您不得使用、仿製或混淆這些商標和標誌。</li>
<li>專利權：如果本網站上包含與專利相關的材料，則這些專利權可能涵蓋著本網站所述的技術、產品或流程。任何未經授權的使用、制造或銷售這些受專利保護的內容可能構成侵犯專利權。</li>
<li>商業秘密：本網站上可能包含 DOCSAID 網站或第三方的商業秘密，如流程、方法或技術。您同意不使用、揭示或以其他方式濫用這些商業秘密。</li>
</ul>
<p>在不違反這些使用條款的前提下，您可以查看、訪問和使用本網站的材料，但您不得以任何形式侵犯這些智慧財產權。如果您有任何有關智慧財產權的疑問或指控，請聯繫我們，我們將盡快回應並採取適當的措施。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="二限制">二、限制<a class="hash-link" aria-label="二、限制的直接連結" title="二、限制的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%BA%8C%E9%99%90%E5%88%B6">​</a></h2>
<p>在使用本網站時，您將受到以下限制：</p>
<ul>
<li>您不得在任何其他媒體上發布本網站材料。</li>
<li>您不得出售、再授權或以其他方式商業化本網站材料。</li>
<li>您不得以任何可能損害本網站的方式使用本網站。</li>
<li>您不得以任何方式影響其他用戶訪問本網站。</li>
<li>您不得使用本網站進行違反法律法規的任何活動，或對本網站造成損害。</li>
<li>您不得從事任何與本網站有關的數據挖掘、數據收集、數據提取或類似活動。</li>
<li>您不得在本網站上進行任何形式的廣告或行銷活動。</li>
<li>DOCSAID 網站保留隨時限制您訪問某些區域的權利。請嚴格保管您的用戶 ID 和密碼，確保其安全與保密。</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="三您的內容">三、您的內容<a class="hash-link" aria-label="三、您的內容的直��接連結" title="三、您的內容的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%B8%89%E6%82%A8%E7%9A%84%E5%85%A7%E5%AE%B9">​</a></h2>
<p>在本使用條款下，「您的內容」指您選擇在 DOCSAID 網站上展示、上傳或分享的音檔、影片、文字、圖片或其他材料。您給予 Docsaid 網站一個非專有、全球性、不可撤回及可再授權的權利，讓我們在任何媒體上使用、複製、改編、出版、翻譯並分發您的內容，以符合各種需求。</p>
<p>您確保您所提供的所有內容都具有必要的權利和授權，並不侵犯第三方的智慧財產權或其他權利。您承諾您的內容不涉及非法、淫穢、誹謗、侮辱、歧視或侵害他人隱私的內容。</p>
<p>遵守法律法規的基礎上，DOCSAID 網站有權在不事先通知的情形下刪除、移除或不公開您的任何內容。我們將依據我們的判斷確保網站內容的合法性和適當性。</p>
<p>您明白 DOCSAID 網站不對您的內容負責，且您要為您的內容的合法性和真實性自行負責。若您的內容違反了這些使用條款或導致法律問題，您需獨立承擔相應的法律後果。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="四您的私隱">四、您的私隱<a class="hash-link" aria-label="四、您的私隱的直接連結" title="四、您的私隱的直接連結" href="https://docsaid.org/blog/terms-of-service#%E5%9B%9B%E6%82%A8%E7%9A%84%E7%A7%81%E9%9A%B1">​</a></h2>
<p>請閱讀<a href="https://docsaid.org/blog/privacy-policy" target="_blank" rel="noopener noreferrer">隱私政策</a>。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="五無保證">五、無保證<a class="hash-link" aria-label="五、無保證的直接連結" title="五、無保證的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%BA%94%E7%84%A1%E4%BF%9D%E8%AD%89">​</a></h2>
<p>本網站的內容按「原樣」提供，並且可能包含錯誤、不完整或過時的信息。DOCSAID 網站明確聲明，不提供與本網站或本網站所含材料有關的任何形式的陳述、保證或擔保，無論是明示的還是默示的。</p>
<p>您理解並同意使用本網站的風險由您自行承擔。本網站上的內容僅供一般信息和參考之用，並不構成專業建議或意見。DOCSAID 網站不對本網站上的內容的準確性、完整性、可靠性或適用性作出任何保證或陳述。</p>
<p>您應自行判斷並承擔使用本網站內容的風險，並在必要時諮詢適當的專業人士以獲得具體建議。DOCSAID 網站對因使用或依賴本網站內容而導致的任何損害、損失或費用不負任何責任。</p>
<p>無論在任何情況下，DOCSAID 網站都不對您使用本網站造成的任何直接、間接、附帶、特殊、懲罰性或衍生的損害承擔責任，即使已事先被告知可能發生此類損害。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="六責任範圍">六、責任範圍<a class="hash-link" aria-label="六、責任範圍的直接連結" title="六、責任範圍的直接連結" href="https://docsaid.org/blog/terms-of-service#%E5%85%AD%E8%B2%AC%E4%BB%BB%E7%AF%84%E5%9C%8D">​</a></h2>
<p>不論在何種情況下，DOCSAID 網站的高級管理層、董事、員工、代理人、附屬單位或其他關聯實體（以下簡稱「相關方」）都不會對您因使用或無法使用本網站，包括但不限於瀏覽、訪問、下載或依賴本網站內容所引起的任何形式的損害、損失或費用負責。</p>
<p>無論是基於合同理論、侵權行為（包括疏忽）、嚴格責任或其他情形，相關方不會對您因以下情況所產生的直接、間接、特定、附帶或連帶的損害承擔任何責任：</p>
<ul>
<li>本網站的使用或無法正常使用。</li>
<li>關於本網站內容的準確性、完整性或可靠性。</li>
<li>通過本網站購買、獲取或使用的任何產品、服務或資訊。</li>
<li>未經授權而存取或修改您的資料傳輸。</li>
<li>任何第三方在本網站上的言論或行為。</li>
</ul>
<p>您明確同意，使用本網站的所有風險完全由您自行承擔。在法律允許的範圍內，相關方不會對您因使用或依賴本網站而發生的任何損失或損害承擔責任。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="七賠償">七、賠償<a class="hash-link" aria-label="七、賠償的直接連結" title="七、賠償的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%B8%83%E8%B3%A0%E5%84%9F">​</a></h2>
<p>您同意，若因您違反這些使用條款，導致 DOCSAID 網站或其關聯方（包括但不限於其管理人員、董事、員工、代表、附屬公司或其他相關實體）遭受損失、損害、費用、訴訟、索賠或其他法律責任，您應對此全面負責並支付相關賠償。</p>
<p>此賠償範圍包括但不僅限於：法律費用、訴訟成本、律師薪酬、專家咨詢費、解決糾紛相關的所有費用及其他因您的違約行為所產生的一切費用。您進一步同意，您將不反對或拒絕配合，並將提供所有必要的支持以協助 DOCSAID 網站及其相關方解決任何因您的違約行為而引發的訴訟、索賠或其他法律事宜。</p>
<p>您確認並承諾，不論在哪個法律管轄區或訴訟場所，您都會全面賠償 DOCSAID 網站及其關聯方的相關損失。此外，您明確認知，此賠償承諾將不受到任何形式的限制，確保 DOCSAID 網站及其關聯方得到適當的法律補償和權益保障。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="八可分割性">八、可分割性<a class="hash-link" aria-label="八、可分割性的直接連結" title="八、可分割性的直接連結" href="https://docsaid.org/blog/terms-of-service#%E5%85%AB%E5%8F%AF%E5%88%86%E5%89%B2%E6%80%A7">​</a></h2>
<p>若根據相關適用法律，這些使用條款的某一條款被認定為無效、非法或不可執行，那麼該特定條款將被視作已被移除，但這並不會對其他條款產生影響或使其失效。</p>
<p>在這種情況下，我們將致力於修訂或替換被認定無效的條款，以確保使用條款的原始意圖和目的得以維持。即便有部分條款因特定原因被認為是不適用或無效，本使用條款的餘下部分仍將保持其效力和約束性。</p>
<p>這些使用條款的分割性確保了即使某些條款在法律上被認為是無效，它仍不會妨礙您與 DOCSAID 網站間其他條款所涵蓋的權利和義務的有效性。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="九使用條款變更">九、使用條款變更<a class="hash-link" aria-label="九、使用條款變更的直接連結" title="九、使用條款變更的直接連結" href="https://docsaid.org/blog/terms-of-service#%E4%B9%9D%E4%BD%BF%E7%94%A8%E6%A2%9D%E6%AC%BE%E8%AE%8A%E6%9B%B4">​</a></h2>
<p>DOCSAID 網站保留在認為必要的時候，不經預告地更新或修改這些使用條款的權利。一旦進行更改，新的使用條款將在本網站上公告，且該修改自公告之日立即生效。</p>
<p>建議您定期瀏覽這些使用條款，以確保您隨時了解其內容和可能的變動。若您在條款更新後繼續使用本網站，則表示您已接受並同意這些更改。</p>
<p>雖然 DOCSAID 網站可能會在某些情況下選擇公布關於重要條款變更的公告或直接通知您，但我們仍鼓勵您每次訪問時都審閱使用條款，以保您對最新版本的條款保持清晰了解。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="十轉讓">十、轉讓<a class="hash-link" aria-label="十、轉讓的直接連結" title="十、轉讓的直接連結" href="https://docsaid.org/blog/terms-of-service#%E5%8D%81%E8%BD%89%E8%AE%93">​</a></h2>
<p>DOCSAID 網站保留隨時轉讓其在本使用條款下的權利、義務或適用權利給第三方的權利，而無需事先通知您。此轉讓可能因多種原因，例如其他實體的合併、收購或網站的運營和管理變更。</p>
<p>相對的，您不得將根據這些使用條款的任何權利、義務或適用權利轉讓、分派、或贈與給任何第三方，除非得到 DOCSAID 網站的事先書面同意。未經 DOCSAID 網站確認的任何試圖轉讓，將被視為無效。</p>
<p>此轉讓規定的目的是保護 DOCSAID 網站不受未授權的轉讓所帶來的影響，並確保您始終明確理解使用條款下的權利和義務。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="十一整個協議">十一、整個協議<a class="hash-link" aria-label="十一、整個協議的直接連結" title="十一、整個協議的直接連結" href="https://docsaid.org/blog/terms-of-service#%E5%8D%81%E4%B8%80%E6%95%B4%E5%80%8B%E5%8D%94%E8%AD%B0">​</a></h2>
<p>這些使用條款為您和 DOCSAID 網站間的法律協議提供了清晰的框架，確保了雙方對於使用該網站時的權利和責任有完整的了解。這不僅僅是一份合約，它代表了您和 DOCSAID 之間的信賴和誠信。</p>
<p>這些條款的結構使得先前的任何口頭或書面約定皆被替代，從而消除了任何不確定性或模糊性。您選擇繼續使用網站意味著您接受並同意遵守這些約定，確保在網站上的互動都是在互相尊重和理解的基礎上進行。</p>
<p>如果您不接受這些建議和規定，最簡單的解決方式是選擇不使用 DOCSAID 網站。但如果您選擇繼續，那麼我們期望您能夠完全遵守這些條款，並期待您在此平台上的每一次互動都是正面和有建設性的。</p>
<p>最後，DOCSAID 網站的目標是為所有用戶提供一個高效、公正和安全的平台。這些使用條款是確保這一目標得以實現的基石。希望每位用戶都能夠尊重和珍視這些規範，共同創建一個更好的網路環境。</p>]]></content>
        <author>
            <name>Zephyr</name>
            <uri>https://github.com/zephyr-sh</uri>
        </author>
        <category label="terms-of-service" term="terms-of-service"/>
    </entry>
</feed>